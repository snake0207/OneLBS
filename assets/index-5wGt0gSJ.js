function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-C2b5Mhwa.js","assets/index-Zwjsjf_e.js","assets/cjs-D8lu4uGd.js","assets/index-DxA-rrMr.js","assets/index-MjI-a-Aq.js","assets/index-DOeUa9Au.js","assets/useSlot-DiK3vQJX.js","assets/Close-DdxGh4K7.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as d,N as w,j as l,B as g,T as L,k as N}from"./index-Zwjsjf_e.js";import{d as O}from"./SettingsSuggestOutlined-BjGQH8rx.js";import{u as V}from"./formik.esm-DxgWIguA.js";import{a as $,b as q,c as H,d as m,e as i,f as k}from"./index-CIhg3QXE.js";import{g as K}from"./service-zx91cxfm.js";import{S as W}from"./index-CkT4d0Nt.js";import{b as X,c as M}from"./system-CTpelrAU.js";import{T as Y}from"./TableBody-sjDPsEYM.js";import{T as j}from"./TextField-C_ArUhJ2.js";import{F as G,C as J}from"./FormControlLabel-BYqcm0yL.js";import"./MenuItem-B4bxXtLY.js";const E={contentBox:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},table_base:{mb:3,th:{pt:1,pb:1,border:"1px solid",borderColor:"table.viewTopBorder"},td:{pt:.5,pb:.5,border:"1px solid",borderColor:"table.viewTopBorder"},"& tr:first-of-type":{"& th":{fontSize:"15px",color:"white",textAlign:"center"}}},center:{textAlign:"center"}},Q=d.lazy(()=>w(()=>import("./index-C2b5Mhwa.js"),__vite__mapDeps([0,1,2,3]))),Z=d.lazy(()=>w(()=>import("./index-MjI-a-Aq.js"),__vite__mapDeps([4,1,5,6,7]))),u={TEXT:0,CHECKBOX:1,ARRAY:2,UNKNOWN:3},ee=()=>{const{mutate:B,isPending:b}=X(),[T,C]=d.useState(""),[n,p]=d.useState({count:0,lists:[]}),[x,h]=d.useState({query:!0,edit:!1,msg:"수정한 정보로 저장 하시겠습니까?",openDialog:!1}),{data:r,refetch:S}=M({},{enabled:x.query}),D=V({initialValues:{engineInfoList:[]},onSubmit:a=>{console.log("handleFormikSubmit..");const c={engineInfoList:[...n==null?void 0:n.lists.map(o=>({name:o.name,dataType:o.dataType,value:o.value}))]};B({...c},{onSuccess:({data:o})=>{console.log("update-response : ",o),C(`UPDATE API RESULT : ${o==null?void 0:o.data}`),(o==null?void 0:o.code)==="0000"&&(p({count:0,lists:[]}),h(v=>({...v,query:!0,edit:!1,openDialog:!1})),S({queryParams:{},queryKey:"refresh-engine"}))}})}}),I=()=>{x.edit&&D.handleSubmit(),A()},A=()=>{h(a=>({...a,edit:!1,openDialog:!1}))},_=()=>{console.log("Add New Row");const a=Math.max(...n==null?void 0:n.lists.map(c=>c.id))+1,e={id:a,name:"",dataType:"S",value:"",newFlag:"Y"};p({count:a,lists:[...n.lists,e]})},R=()=>{h(a=>({...a,edit:!0,openDialog:!0}))},F=a=>{console.log("Delete Row id : ",a),p({count:n.count-1,lists:[...n.lists.filter(e=>e.id!=a)]})};d.useEffect(()=>{var a;r&&(console.log("apiResult : ",r),(r==null?void 0:r.code)==="0000"&&(h(e=>({...e,query:!1})),p({count:(a=r==null?void 0:r.data)==null?void 0:a.length,lists:[...r==null?void 0:r.data].sort((e,c)=>e.name<c.name?-1:e.name>c.name?1:0)})))},[r,S]);const f=a=>{const e=a.toUpperCase();return e==="S"||e==="I"||e==="D"?u.TEXT:e==="B"?u.CHECKBOX:e==="AS"||e==="AI"||e==="AD"?u.ARRAY:u.UNKNOWN},P=({idx:a,item:e})=>{const[c,o]=d.useState({...e}),v=s=>{const t=s.dataType.toUpperCase();t==="S"?String(s.value):t==="I"?parseInt(s.value):t==="D"?parseFloat(s.value):t==="B"||t==="AS"||t==="AI"||t==="AD"?s.value:console.warn("Unknown dataType, check select-box list...")},y=()=>{console.log("handleBlur : ",e),v(e);const s=n.lists.filter(t=>t.id!==e.id);p({count:n.count,lists:[...s,e]})},U=s=>{const t=s.value.toUpperCase();console.log(`CHANGE ${e.dataType} ===> ${t}`),t==="S"?e.value=String(e.value):t==="I"||t==="D"?e.value=1:t==="B"?e.value=!0:t==="AS"?e.value=e.value||"":t==="AI"?e.value=1:t==="AD"&&(e.value=.1),e.dataType=s.value,o(z=>({...z,dataType:e.dataType,value:e.value}))};return l.jsxs(m,{children:[l.jsx(i,{style:{textAlign:"right"},children:e.id}),l.jsx(i,{children:e.newFlag!=="Y"?e.name:l.jsx(j,{id:`${e.id}`,variant:"outlined",type:"text",fullWidth:!0,size:"small",value:e.name,onChange:s=>{e.name=s.target.value,o(t=>({...t,name:s.target.value}))},onBlur:y})}),l.jsx(i,{children:l.jsx(W,{name:e.dataType,items:K(),value:e.dataType,onChange:s=>U(s),style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})}),l.jsxs(i,{children:[f(e.dataType)===u.TEXT&&l.jsx(j,{id:`${e.id}`,variant:"outlined",type:"text",fullWidth:!0,size:"small",value:e.value,onChange:s=>{e.value=s.target.value,o(t=>({...t,value:s.target.value}))},onBlur:y}),f(e.dataType)===u.CHECKBOX&&l.jsx(G,{control:l.jsx(J,{checked:e.value,onChange:s=>{e.value=s.target.checked,o(t=>({...t,value:s.target.checked}))}}),label:e.value?"적용":"미적용"}),f(e.dataType)===u.ARRAY&&l.jsx(g,{sx:{display:"flex",alignItems:"center"},children:l.jsx(j,{id:`${e.id}`,variant:"outlined",type:"text",fullWidth:!0,size:"small",value:e.value,onChange:s=>{e.value=s.target.value,o(t=>({...t,value:s.target.value}))},onBlur:y})})]}),l.jsx(i,{style:{textAlign:"center"},children:l.jsx(N,{variant:"text",sx:{color:"red"},onClick:()=>F(e.id),children:"Delete"})})]})};return l.jsxs(g,{children:[l.jsx($,{title:"엔진 설정 관리"}),l.jsx("form",{style:{width:"100%"},children:l.jsxs(g,{sx:E.contentBox,children:[l.jsxs(g,{display:"flex",alignItems:"center",mb:2,children:[l.jsx(O,{}),l.jsx(L,{sx:{ml:1,fontSize:"16px",fontWeight:500,color:"text.darkgray"},children:"엔진 환경 설정"})]}),l.jsxs(q,{size:"small",sx:E.table_base,children:[l.jsx(H,{children:l.jsxs(m,{sx:{backgroundColor:"#009ACC",position:"sticky",top:0},children:[l.jsx(i,{style:{width:"8%"},children:"번호"}),l.jsx(i,{style:{width:"40%"},children:"설정명"}),l.jsx(i,{style:{width:"15%"},children:"데이터 타입"}),l.jsx(i,{style:{width:"27%"},children:"값"}),l.jsx(i,{style:{width:"10%"},children:"삭제"})]})}),l.jsx(Y,{children:(n==null?void 0:n.count)>0&&(n==null?void 0:n.lists.map((a,e)=>l.jsx(P,{idx:e,item:a},a.id)))})]}),l.jsxs(g,{align:"right",display:"flex",justifyContent:"flex-end",alignItems:"center",children:[l.jsx(k,{disabled:b,name:"add",title:"설정 추가",onClick:_}),l.jsx(k,{disabled:b,name:"create",title:"설정 저장",onClick:R})]})]})}),x.openDialog&&l.jsx(d.Suspense,{fallback:l.jsx("div",{children:"Loading..."}),children:l.jsx(Q,{isOpen:x.openDialog,content:x.msg,onCancel:A,onConfirm:I})}),T&&l.jsx(d.Suspense,{fallback:l.jsx("div",{children:"Loading..."}),children:l.jsx(Z,{msg:T,autoHideDuration:5e3,callback:()=>C(!1)})})]})},le=()=>l.jsx(l.Fragment,{children:l.jsx(ee,{})}),xe=le;export{xe as EngineEditPage};
