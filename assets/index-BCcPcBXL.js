import{j as e,B as s,T as l,S as r,O as i,r as d}from"./index-CtGT7pB0.js";import{b as t,c as a,d as n,e as o,M as c,a as x}from"./index-CkwR4aEQ.js";import{C as h}from"./index-VIunMvyj.js";import{u as p}from"./service-zn3oAYvt.js";import{u as m}from"./formik.esm-DAidWDL1.js";import{S as j}from"./index-BN4gr2T-.js";import{D as f}from"./index--uCOVDIp.js";import{T as u}from"./index-DlwK5QFR.js";import{C}from"./index-BFtMdZUY.js";import{T as w}from"./index-Ddq0Ofe6.js";import{a as k,u as y}from"./service-Dw05zt6F.js";import"./index-C6TEBvmk.js";import"./index-DE0F4aPm.js";import"./TextField-D-bOuL6E.js";import"./MenuItem-BYlXn1lz.js";import"./Close-CTx8nZBT.js";import"./FormControlLabel-CIx-0vjk.js";import"./InputAdornment-CN7O440v.js";const v={searchBox:{display:"flex",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"6px 10px 6px 0"},input:{height:"40px",pt:0,pb:0}}};function g({onSearch:i}){const d=m({initialValues:{dateType:"D",startDate:"",endDate:"",start_time:"00",end_time:String((new Date).getHours()),serviceCheck:!1,appIdCheck:!1,modelCheck:!1,opTypeCheck:!1,respCodeCheck:!1,service:"",appId:"",model:"",opType:"N",respCode:""},onSubmit:e=>{const s=`${e.startDate.split("-").join("")}${e.start_time}`,l=`${e.endDate.split("-").join("")}${e.end_time}`,r="N"===e.opType?"":e.opType;i&&(delete e.start_time,delete e.end_time,i({...e,startDate:s,endDate:l,opType:r}))}});return e.jsxs(s,{sx:v.searchBox,flexDirection:"column",children:[e.jsxs(s,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(s,{sx:{flex:1},children:e.jsx(l,{children:"시간 구분"})}),e.jsx(s,{sx:{flex:5},children:e.jsx(t,{sx:v.tableBox,children:e.jsx(a,{children:e.jsxs(n,{children:[e.jsx(o,{style:{width:"15%"},children:e.jsx(j,{name:"dateType",formik:d,items:k(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(o,{style:{width:"4%"}}),e.jsx(o,{style:{width:"8%"},children:"조회기간"}),e.jsx(o,{style:{width:"60%"},children:e.jsxs(r,{direction:"row",spacing:.1,alignItems:"center",width:"100%",children:[e.jsx(f,{name:"startDate",formik:d}),e.jsx(u,{name:"start_time",formik:d}),e.jsx(l,{children:"~"}),e.jsx(f,{name:"endDate",formik:d}),e.jsx(u,{name:"end_time",formik:d})]})})]})})})}),e.jsx(s,{sx:{flex:1}})]}),e.jsxs(s,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(s,{sx:{flex:1},children:e.jsx(l,{children:"Group By"})}),e.jsx(s,{sx:{flex:5},children:e.jsx(t,{sx:v.tableBox,children:e.jsx(a,{children:e.jsx(n,{children:e.jsx(o,{colSpan:8,children:e.jsxs(s,{display:"flex",justifyContent:"space-between",children:[e.jsx(C,{checked:d.values.serviceCheck,onChange:e=>d.setFieldValue("serviceCheck",e.target.checked),value:d.values.serviceCheck,label:"서비스코드"}),e.jsx(C,{checked:d.values.appIdCheck,onChange:e=>d.setFieldValue("appIdCheck",e.target.checked),value:d.values.appIdCheck,label:"AppID"}),e.jsx(C,{checked:d.values.modelCheck,onChange:e=>d.setFieldValue("modelCheck",e.target.checked),value:d.values.modelCheck,label:"모델"}),e.jsx(C,{checked:d.values.opTypeCheck,onChange:e=>d.setFieldValue("opTypeCheck",e.target.checked),value:d.values.opTypeCheck,label:"OP Type"}),e.jsx(C,{checked:d.values.respCodeCheck,onChange:e=>d.setFieldValue("respCodeCheck",e.target.checked),value:d.values.respCodeCheck,label:"응답코드"})]})})})})})}),e.jsx(s,{sx:{flex:1}})]}),e.jsxs(s,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(s,{sx:{flex:1},children:e.jsx(l,{children:"검색 조건"})}),e.jsx(s,{sx:{flex:5},children:e.jsx(t,{sx:v.tableBox,children:e.jsx(a,{children:e.jsxs(n,{children:[e.jsx(o,{style:{width:"7%"},children:"서비스 코드"}),e.jsx(o,{style:{width:"10%"},children:e.jsx(w,{name:"service",formik:d})}),e.jsx(o,{style:{width:"7%"},children:"App ID"}),e.jsx(o,{style:{width:"10%"},children:e.jsx(w,{name:"appId",formik:d})}),e.jsx(o,{style:{width:"7%"},children:"단말 모델"}),e.jsx(o,{style:{width:"10%"},children:e.jsx(w,{name:"model",formik:d})}),e.jsx(o,{style:{width:"7%"},children:"OP Type"}),e.jsx(o,{style:{width:"10%"},children:e.jsx(j,{name:"opType",items:y(),formik:d,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(o,{style:{width:"7%"},children:"응답 코드"}),e.jsx(o,{style:{width:"10%"},children:e.jsx(w,{name:"respCode",formik:d})})]})})})}),e.jsx(s,{sx:{flex:1,display:"flex",alignItems:"flex-end"},children:e.jsx(c,{disabled:!d.values.startDate||!d.values.endDate,name:"search",title:"검색",onClick:d.handleSubmit})})]})]})}const b=[{field:"id",headerName:"ID",flex:.8,renderCell:s=>e.jsx(l,{children:s.row.id})},{field:"statDate",headerName:"통계일",flex:1.2,renderCell:s=>e.jsx(l,{color:"primary",children:s.row.statDate})},{field:"service",headerName:"서비스 코드",flex:1,renderCell:s=>e.jsx(l,{children:s.row.service})},{field:"appId",headerName:"APP ID",flex:1,renderCell:s=>e.jsx(l,{children:s.row.appId})},{field:"model",headerName:"단말 모델",flex:1,renderCell:s=>e.jsx(l,{children:s.row.model})},{field:"opType",headerName:"OP Type",flex:1,renderCell:s=>e.jsx(l,{children:s.row.opType})},{field:"respCode",headerName:"응답코드",flex:1,renderCell:s=>e.jsx(l,{children:s.row.respCode})},{field:"count",headerName:"전체",flex:1,renderCell:s=>e.jsx(l,{children:s.row.count.toLocaleString()})},{field:"successCnt",headerName:"성공",flex:1,renderCell:s=>e.jsx(l,{children:s.row.successCnt.toLocaleString()})},{field:"successRate",headerName:"성공률(%)",flex:1,renderCell:s=>e.jsx(l,{children:s.row.successRate})},{field:"elapsedTime",headerName:"평균응답(초)",flex:1,renderCell:s=>e.jsx(l,{children:s.row.elapsedTime})}],T=e=>{const s=[{field:"id",flex:.8,headerName:"ID",view:!0},{field:"statDate",flex:1.2,headerName:"통계일",view:!0},{field:"service",flex:1,headerName:"서비스 코드",view:e.serviceCheck},{field:"appId",flex:1,headerName:"APP ID",view:e.appIdCheck},{field:"model",flex:1,headerName:"단말 모델",view:e.modelCheck},{field:"opType",flex:1,headerName:"OP Type",view:e.opTypeCheck},{field:"respCode",flex:1,headerName:"응답코드",view:e.respCodeCheck},{field:"count",flex:1,headerName:"전체",view:!0},{field:"successCnt",flex:1,headerName:"성공",view:!0},{field:"successRate",flex:1,headerName:"성공률(%)",view:!0},{field:"elapsedTime",flex:1,headerName:"평균응답(초)",view:!0}];return s.filter((e=>!1!==e.view)).length>6?s.filter((e=>e.view)):s.map((e=>({...e,view:!0})))},I=()=>{i();const[r,t]=d.useState(!1),[a,n]=d.useState({count:0,lists:[]}),[o,c]=d.useState({page:1,limit:parseInt("50")}),{data:m}=p(o,{enabled:r});return d.useEffect((()=>{if(r&&m&&"0000"===m.code&&m.data){const{totalCount:e,lists:s}=m.data;t(!1),n((l=>({count:e,lists:[...l.lists,...s]})))}}),[r,m]),e.jsxs(s,{children:[e.jsx(x,{title:"서비스 통계"}),e.jsx(g,{onSearch:e=>{n({count:0,lists:[]}),c({...o,...e,page:1}),t(!0)}}),e.jsxs(s,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(s,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(l,{sx:{fontSize:"14px"},children:`Total Count: ${a.count}`})}),e.jsx(h,{rows:null==a?void 0:a.lists,rowCount:null==a?void 0:a.count,columns:(null==a?void 0:a.count)?T(o):b,sort:{field:"id",orderby:"desc"},onPageChange:e=>{const s=parseInt("10");e>0&&(e+1)*s>=a.lists.length&&(c({...o,page:o.page+1}),t(!0))},onRowClick:({row:e})=>{},activeTools:["export"],pageInit:1===o.page})]})]})};export{I as ServiceStatPage};
