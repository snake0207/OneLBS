import{j as e,B as r,S as o,T as t,r as i}from"./index-CtGT7pB0.js";import{b as l,c as a,d as n,e as s,M as d,a as c}from"./index-CkwR4aEQ.js";import{C as x}from"./index-VIunMvyj.js";import{b as p}from"./service-zn3oAYvt.js";import{u as h}from"./formik.esm-DAidWDL1.js";import{S as m}from"./index-BN4gr2T-.js";import{D as f}from"./index--uCOVDIp.js";import{e as j,f as u}from"./service-Dw05zt6F.js";import"./index-C6TEBvmk.js";import"./index-DE0F4aPm.js";import"./TextField-D-bOuL6E.js";import"./MenuItem-BYlXn1lz.js";import"./Close-CTx8nZBT.js";import"./FormControlLabel-CIx-0vjk.js";import"./InputAdornment-CN7O440v.js";const g={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0"},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"35%"}};function w({onSearch:i}){const c=h({initialValues:{startDate:"",endDate:"",crowdType:"T"},onSubmit:e=>{const r=`${e.startDate.split("-").join("")}`,o=`${e.endDate.split("-").join("")}`;i&&i({startDate:r,endDate:o,crowdType:e.crowdType})}});return e.jsx(r,{sx:g.searchBox,children:e.jsx(l,{sx:g.tableBox,children:e.jsx(a,{children:e.jsxs(n,{children:[e.jsx(s,{sx:g.cellTitle,children:"처리 구분"}),e.jsx(s,{sx:{width:"15%"},children:e.jsx(m,{name:"crowdType",formik:c,items:j(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(s,{}),e.jsx(s,{sx:g.cellTitle,children:"조회기간"}),e.jsx(s,{sx:{width:"46%"},children:e.jsxs(o,{direction:"row",spacing:.3,alignItems:"center",width:"100%",children:[e.jsx(f,{name:"startDate",formik:c}),e.jsx(t,{children:"~"}),e.jsx(f,{name:"endDate",formik:c})]})}),e.jsx(s,{align:"right",children:e.jsx(d,{disabled:!c.values.startDate||!c.values.endDate,name:"search",title:"검색",onClick:c.handleSubmit})})]})})})})}const C=[{field:"id",headerName:"ID",flex:.8,renderCell:r=>e.jsx(t,{children:r.row.id})},{field:"statDate",headerName:"통계일",flex:1,renderCell:r=>e.jsx(t,{children:r.row.statDate})},{field:"crowdType",headerName:"처리구분",flex:1,renderCell:r=>e.jsx(t,{children:void 0!==u[r.row.crowdType]?u[r.row.crowdType].label:`${r.row.crowdType} is not exist`})},{field:"records",headerName:"전체 레코드",flex:1.2,renderCell:r=>e.jsx(t,{sx:{color:"black",fontWeight:"bold"},children:r.row.records.toLocaleString()})},{field:"invalidFormat",headerName:"비정상",flex:1,renderCell:r=>e.jsx(t,{sx:{color:"red"},children:r.row.invalidFormat.toLocaleString()})},{field:"lackAccuracy",headerName:"부정확",flex:1,renderCell:r=>e.jsx(t,{sx:{color:"green"},children:r.row.lackAccuracy.toLocaleString()})},{field:"overseas",headerName:"유효범위 외",flex:1,renderCell:r=>e.jsx(t,{sx:{color:"magenta"},children:r.row.overseas.toLocaleString()})},{field:"apCount",headerName:"AP 수",flex:1,renderCell:r=>e.jsx(t,{color:"primary",children:r.row.apCount.toLocaleString()})},{field:"infoError",headerName:"비정상",flex:1,renderCell:r=>e.jsx(t,{children:r.row.infoError.toLocaleString()})},{field:"exceedRange",headerName:"비유효반경",flex:1,renderCell:r=>e.jsx(t,{children:r.row.exceedRange.toLocaleString()})},{field:"nationWideCoverage",headerName:"커버리지(%)",flex:1,renderCell:r=>e.jsx(t,{children:r.row.nationWideCoverage})}],b=[{groupId:"WiFi 처리정보",headerAlign:"center",children:[{field:"apCount"},{field:"infoError"},{field:"exceedRange"},{field:"nationWideCoverage"}]}],S=()=>{const[o,l]=i.useState(!1),[a,n]=i.useState({count:0,lists:[]}),[s,d]=i.useState({page:1,limit:parseInt("50")}),{data:h}=p(s,{enabled:o});return i.useEffect((()=>{if(o&&h&&"0000"===(null==h?void 0:h.code)){const{totalCount:e,lists:r}=null==h?void 0:h.data;l(!1),n({count:e,lists:[...a.lists,...r]})}}),[h,s]),e.jsxs(r,{children:[e.jsx(c,{title:"크라우드소싱 통계"}),e.jsx(w,{onSearch:e=>{n({count:0,lists:[]}),d({...s,...e,page:1}),l(!0)}}),e.jsxs(r,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(r,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(t,{sx:{fontSize:"14px"},children:`Total Count: ${a.count}`})}),e.jsx(x,{rows:null==a?void 0:a.lists,rowCount:null==a?void 0:a.count,columns:C,columnGroupingModel:b,sort:{field:"id",orderby:"desc"},onPageChange:e=>{const r=parseInt("10");e>0&&(e+1)*r>=a.lists.length&&(d({...s,page:s.page+1}),l(!0))},onRowClick:({row:e})=>{},activeTools:["export"],pageInit:1===s.page})]})]})};export{S as CrowdStatPage};
