import{j as e,B as t,T as r,O as i,r as s}from"./index-DNBezHmp.js";import{b as n,c as a,d,e as o,M as l,a as x}from"./index-K9FZnq_n.js";import{C as h}from"./index-4-V6eLgu.js";import{c}from"./service-Cx5U09py.js";import{u as p}from"./formik.esm-DhXVXXHr.js";import{T as m}from"./index-0KennhiS.js";import{c as u,a as j}from"./index.esm-Db1lzYWE.js";import"./index-BfV9KbSX.js";import"./index-Q7s2wh8K.js";import"./TextField-rg4txBXg.js";import"./MenuItem-DrfqH9qa.js";import"./Close-Didp81Oi.js";import"./FormControlLabel-DM4QGyIb.js";import"./InputAdornment-BGi_TbIT.js";const g={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0"},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"35%"}};function f({onSearch:r}){const i=p({initialValues:{targetMdn:""},validationSchema:u({targetMdn:j().matches(/^\d{10}$|^\d{11}$/,"10~11자리 숫자를 입력해 주세요.")}),onSubmit:e=>{r&&r(e)}});return e.jsx(t,{sx:g.searchBox,children:e.jsx(n,{sx:g.tableBox,children:e.jsx(a,{children:e.jsxs(d,{children:[e.jsx(o,{sx:g.cellTitle,children:"전화번호"}),e.jsx(o,{style:{width:"20%"},children:e.jsx(m,{name:"targetMdn",formik:i})}),e.jsx(o,{align:"right",children:e.jsx(l,{name:"search",title:"검색",onClick:i.handleSubmit})})]})})})})}const w=[{field:"id",headerName:"ID",width:98.00000000000001,renderCell:t=>e.jsx(r,{children:t.row.id})},{field:"regDate",headerName:"등록 일시",width:168,renderCell:t=>e.jsx(r,{children:t.row.regDate})},{field:"startDate",headerName:"시작 일시",width:168,renderCell:t=>e.jsx(r,{children:t.row.startDate})},{field:"endDate",headerName:"종료 일시",width:168,renderCell:t=>e.jsx(r,{children:t.row.endDate})},{field:"interval",headerName:"주기(초)",width:98.00000000000001,align:"right",renderCell:t=>e.jsx(r,{children:t.row.interval})},{field:"requestorMdn",headerName:"요청자",width:140,renderCell:t=>e.jsx(r,{children:t.row.requestorMdn})},{field:"targetMdn",headerName:"대상자",width:140,renderCell:t=>e.jsx(r,{children:t.row.targetMdn})},{field:"urlPage",headerName:"URL",width:420,renderCell:t=>e.jsx(r,{children:t.row.urlPage})}],b=()=>{i();const[n,a]=s.useState(!1),[d,o]=s.useState({count:0,lists:[]}),[l,p]=s.useState({page:1,limit:parseInt("50")}),{data:m}=c(l,{enabled:n});return s.useEffect((()=>{if(n&&m&&"0000"===(null==m?void 0:m.code)){const{totalCount:e,lists:t}=null==m?void 0:m.data;a(!1),o({count:e,lists:[...d.lists,...t]})}}),[m,l]),e.jsxs(t,{children:[e.jsx(x,{title:"위치 트리거 조회"}),e.jsx(f,{onSearch:e=>{o({count:0,lists:[]}),p({...l,...e,page:1}),a(!0)}}),e.jsxs(t,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(t,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(r,{sx:{fontSize:"14px"},children:`Total Count: ${d.count}`})}),e.jsx(h,{rows:null==d?void 0:d.lists,rowCount:null==d?void 0:d.count,columns:w,sort:{field:"id",orderby:"desc"},onPageChange:e=>{const t=parseInt("10");e>0&&(e+1)*t>=d.lists.length&&(p({...l,page:l.page+1}),a(!0))},onRowClick:({row:e})=>{},activeTools:["export"],pageInit:1===l.page})]})]})};export{b as TriggerListPage};
