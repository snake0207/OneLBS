import{j as e,B as p,S,T as i,O as _,r as c}from"./index-CMVj578i.js";import{b as k,c as y,d as m,e as l,M as T,a as I}from"./index-Ccs25vvN.js";import{C as B}from"./index-ClziLJHD.js";import{e as N}from"./system-ClcIfyj-.js";import{u as v}from"./formik.esm-Bxiyl05w.js";import{T as L}from"./index-t3WTL6mH.js";import{D as u}from"./index-Dg_iJyPH.js";import{T as w}from"./index-DO72Fjaf.js";import"./index-RSFPSF8C.js";import"./index-BG4KGtcg.js";import"./TextField-DlvKLlcX.js";import"./MenuItem-Cq3gzPAw.js";import"./Close-DL26paGk.js";import"./FormControlLabel-DqmbKUpD.js";import"./InputAdornment-QnwYxBBF.js";const f={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0","&:nth-of-type(even)":{pr:"20px"}},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"100px"},cellInput:{width:"300px"}};function R({onSearch:t}){const s=v({initialValues:{start_date:"",end_date:"",start_time:"",end_time:"",viewer:""},onSubmit:r=>{const d=`${r.start_date.split("-").join("")}${r.start_time}`,n=`${r.end_date.split("-").join("")}${r.end_time}`;t&&t({start_date:d,end_date:n,viewer:r.viewer})}});return e.jsx(p,{sx:f.searchBox,children:e.jsx(k,{sx:f.tableBox,children:e.jsxs(y,{children:[e.jsxs(m,{children:[e.jsx(l,{sx:{},colSpan:3,children:"조회기간"}),e.jsx(l,{sx:{},colSpan:3,children:"열람자"})]}),e.jsxs(m,{children:[e.jsx(l,{sx:{width:"64%"},colSpan:3,children:e.jsxs(S,{direction:"row",spacing:.1,alignItems:"center",width:"100%",children:[e.jsx(u,{name:"start_date",formik:s}),e.jsx(w,{name:"start_time",formik:s}),e.jsx(i,{children:"~"}),e.jsx(u,{name:"end_date",formik:s}),e.jsx(w,{name:"end_time",formik:s})]})}),e.jsx(l,{sx:{width:"20%"},colSpan:2,children:e.jsx(L,{name:"viewer",formik:s})}),e.jsx(l,{align:"right",children:e.jsx(T,{name:"search",title:"검색",onClick:s.handleSubmit})})]})]})})})}const P=[{field:"id",headerName:"ID",flex:.5,renderCell:t=>e.jsx(i,{children:t.row.id})},{field:"view_date",headerName:"열람 일시",flex:1,renderCell:t=>e.jsx(i,{color:"primary",children:t.row.view_date})},{field:"viewer",headerName:"열람자",flex:1,renderCell:t=>e.jsx(i,{children:t.row.viewer})},{field:"target",headerName:"열람 대상자",flex:1,renderCell:t=>e.jsx(i,{children:t.row.target})},{field:"query_date",headerName:"조회 기간",flex:2,renderCell:t=>e.jsxs(i,{children:[t.row.start_date," ~ ",t.row.end_date]})},{field:"purpose",headerName:"열람 목적",flex:1.2,renderCell:t=>e.jsx(i,{children:t.row.purpose})},{field:"contents",headerName:"열람 내용",flex:1,renderCell:t=>e.jsx(i,{children:t.row.contents})},{field:"viewCount",headerName:"열람 건수",flex:1,align:"right",renderCell:t=>e.jsx(i,{children:t.row.viewCount})}],V=()=>{_();const[t,s]=c.useState(!0),[r,d]=c.useState({count:0,lists:[]}),[n,h]=c.useState({start_date:"",end_date:"",page:1,limit:50}),{data:x}=N(n,{enabled:!0}),g=a=>{d({count:0,lists:[]}),s(o=>!o),h({...n,...a,page:1})},j=({row:a})=>{},b=a=>{const o=parseInt("10"),C=(a+1)*o;a>0&&C>=r.lists.length&&h({...n,page:n.page+1})};return c.useEffect(()=>{if(x){const{count:a,lists:o}=x;d({count:a,lists:[...r.lists,...o]})}},[x,t]),console.log("fetchData : ",r),e.jsxs(p,{children:[e.jsx(I,{title:"위치이력 열람 내역"}),e.jsx(R,{onSearch:g}),r&&e.jsx(p,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:e.jsx(B,{checkboxSelection:!1,rows:r==null?void 0:r.lists,rowCount:r==null?void 0:r.count,columns:P,sort:{field:"id",orderby:"desc"},onPageChange:b,onRowClick:j,pageInit:n.page===1})})]})},U=V;export{U as LocViewListPage};
