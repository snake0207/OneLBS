import{j as e,B as t,S as r,T as s,O as i,r as l}from"./index-DNBezHmp.js";import{b as n,c as a,d as o,e as d,M as x,a as c}from"./index-K9FZnq_n.js";import{C as p}from"./index-4-V6eLgu.js";import{c as h}from"./user-R1EfBqUc.js";import{u as m}from"./formik.esm-DhXVXXHr.js";import{T as u}from"./index-0KennhiS.js";import{S as j}from"./index-DgBZXdG5.js";import{D as f}from"./index-rEwVhy06.js";import{T as g}from"./index-BH5Sabbh.js";import"./index-BfV9KbSX.js";import"./index-Q7s2wh8K.js";import"./TextField-rg4txBXg.js";import"./MenuItem-DrfqH9qa.js";import"./Close-Didp81Oi.js";import"./FormControlLabel-DM4QGyIb.js";import"./InputAdornment-BGi_TbIT.js";const b={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0"},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"35%"}};function w({onSearch:s}){const i=m({initialValues:{startDate:"",endDate:"",start_time:String((new Date).getHours()),end_time:String((new Date).getHours()),reqType:"L",userId:""},onSubmit:e=>{const t=`${e.startDate.split("-").join("")}${e.start_time}`,r=`${e.endDate.split("-").join("")}${e.end_time}`;s&&s({startDate:t,endDate:r,reqType:e.reqType,userId:e.userId})}});return e.jsx(t,{sx:b.searchBox,children:e.jsx(n,{sx:b.tableBox,children:e.jsxs(a,{children:[e.jsxs(o,{children:[e.jsx(d,{sx:b.cellTitle,rowSpan:2,children:"조회기간"}),e.jsx(d,{sx:b.cellInput,children:e.jsxs(r,{direction:"row",spacing:.3,alignItems:"center",width:"100%",children:[e.jsx(f,{name:"startDate",formik:i}),e.jsx(g,{name:"start_time",formik:i})]})}),e.jsx(d,{sx:{width:"5%"}}),e.jsx(d,{sx:b.cellTitle,children:"구분"}),e.jsx(d,{sx:{width:"20%"},children:e.jsx(j,{name:"reqType",formik:i,items:[{key:"T",value:"T",label:"전체"},{key:"L",value:"L",label:"로그인"},{key:"A",value:"A",label:"권한변경"},{key:"M",value:"M",label:"메뉴접근"}],sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})})]}),e.jsxs(o,{children:[e.jsx(d,{sx:b.cellInput,children:e.jsxs(r,{direction:"row",spacing:.3,alignItems:"center",width:"100%",children:[e.jsx(f,{name:"endDate",formik:i}),e.jsx(g,{name:"end_time",formik:i})]})}),e.jsx(d,{sx:{width:"5%"}}),e.jsx(d,{sx:b.cellTitle,children:"아이디"}),e.jsx(d,{sx:{width:"20%"},children:e.jsx(u,{name:"userId",formik:i})}),e.jsx(d,{align:"right",children:e.jsx(x,{name:"search",title:"검색",onClick:i.handleSubmit})})]})]})})})}const y={T:{label:"전체"},L:{label:"로그인"},A:{label:"권한변경"},M:{label:"메뉴접근"}},C={A:{label:"관리자"},O:{label:"운영자"}},T=[{field:"id",headerName:"ID",flex:.8,renderCell:t=>e.jsx(s,{children:t.row.id})},{field:"regDate",headerName:"일시",flex:2,renderCell:t=>e.jsx(s,{color:"primary",children:t.row.regDate})},{field:"userId",headerName:"열람자",flex:1,renderCell:t=>e.jsx(s,{children:t.row.userId})},{field:"reqType",headerName:"이력 구분",flex:1,renderCell:t=>e.jsx(s,{children:y[t.row.reqType].label})},{field:"authType",headerName:"권한",flex:1,renderCell:t=>e.jsx(s,{children:C[t.row.authType].label})},{field:"ipAddr",headerName:"접속 IP",flex:1,renderCell:t=>e.jsx(s,{children:t.row.ipAddr})},{field:"detail",headerName:"내용",flex:2,renderCell:t=>e.jsx(s,{children:t.row.detail})}],I=()=>{i();const[r,n]=l.useState({count:0,lists:[]}),[a,o]=l.useState(!0),[d,x]=l.useState({startDate:"",endDate:"",reqType:"T",userId:"",page:1,limit:parseInt("50")}),{mutate:m,isPending:u}=h();return l.useEffect((()=>{a&&m({...d},{onSuccess:({data:e})=>{if("0000"===(null==e?void 0:e.code)){const{totalCount:t,lists:s}=null==e?void 0:e.data;n({count:t,lists:[...r.lists,...s]})}}})}),[d]),e.jsxs(t,{children:[e.jsx(c,{title:"사용자 이력관리"}),e.jsx(w,{onSearch:e=>{n({count:0,lists:[]}),x({...d,...e,page:1})}}),r&&e.jsxs(t,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:e.jsx(s,{sx:{fontSize:"14px"},children:`Total Count: ${null==r?void 0:r.count}`})}),e.jsx(p,{rows:null==r?void 0:r.lists,rowCount:null==r?void 0:r.count,columns:T,sort:{field:"id",orderby:"desc"},onPageChange:e=>{const t=parseInt("10");e>0&&(e+1)*t>=r.lists.length&&x({...d,page:d.page+1})},onRowClick:({row:e})=>{},pageInit:1===d.page})]})]})};export{I as UserHistoryListPage};
