import{j as e,B as t,S as r,T as i,O as s,r as n}from"./index-CtGT7pB0.js";import{b as a,c as o,d,e as l,M as x,a as c}from"./index-CkwR4aEQ.js";import{C as p}from"./index-VIunMvyj.js";import{e as h}from"./system-BhhvE9sE.js";import{u as m}from"./formik.esm-DAidWDL1.js";import{T as j}from"./index-Ddq0Ofe6.js";import{D as f}from"./index--uCOVDIp.js";import{T as u}from"./index-DlwK5QFR.js";import"./index-C6TEBvmk.js";import"./index-DE0F4aPm.js";import"./TextField-D-bOuL6E.js";import"./MenuItem-BYlXn1lz.js";import"./Close-CTx8nZBT.js";import"./FormControlLabel-CIx-0vjk.js";import"./InputAdornment-CN7O440v.js";const w={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0","&:nth-of-type(even)":{pr:"20px"}},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"100px"},cellInput:{width:"300px"}};function g({onSearch:s}){const n=m({initialValues:{start_date:"",end_date:"",start_time:"",end_time:"",viewer:""},onSubmit:e=>{const t=`${e.start_date.split("-").join("")}${e.start_time}`,r=`${e.end_date.split("-").join("")}${e.end_time}`;s&&s({start_date:t,end_date:r,viewer:e.viewer})}});return e.jsx(t,{sx:w.searchBox,children:e.jsx(a,{sx:w.tableBox,children:e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(l,{sx:{},colSpan:3,children:"조회기간"}),e.jsx(l,{sx:{},colSpan:3,children:"열람자"})]}),e.jsxs(d,{children:[e.jsx(l,{sx:{width:"64%"},colSpan:3,children:e.jsxs(r,{direction:"row",spacing:.1,alignItems:"center",width:"100%",children:[e.jsx(f,{name:"start_date",formik:n}),e.jsx(u,{name:"start_time",formik:n}),e.jsx(i,{children:"~"}),e.jsx(f,{name:"end_date",formik:n}),e.jsx(u,{name:"end_time",formik:n})]})}),e.jsx(l,{sx:{width:"20%"},colSpan:2,children:e.jsx(j,{name:"viewer",formik:n})}),e.jsx(l,{align:"right",children:e.jsx(x,{name:"search",title:"검색",onClick:n.handleSubmit})})]})]})})})}const b=[{field:"id",headerName:"ID",flex:.5,renderCell:t=>e.jsx(i,{children:t.row.id})},{field:"view_date",headerName:"열람 일시",flex:1,renderCell:t=>e.jsx(i,{color:"primary",children:t.row.view_date})},{field:"viewer",headerName:"열람자",flex:1,renderCell:t=>e.jsx(i,{children:t.row.viewer})},{field:"target",headerName:"열람 대상자",flex:1,renderCell:t=>e.jsx(i,{children:t.row.target})},{field:"query_date",headerName:"조회 기간",flex:2,renderCell:t=>e.jsxs(i,{children:[t.row.start_date," ~ ",t.row.end_date]})},{field:"purpose",headerName:"열람 목적",flex:1.2,renderCell:t=>e.jsx(i,{children:t.row.purpose})},{field:"contents",headerName:"열람 내용",flex:1,renderCell:t=>e.jsx(i,{children:t.row.contents})},{field:"viewCount",headerName:"열람 건수",flex:1,align:"right",renderCell:t=>e.jsx(i,{children:t.row.viewCount})}],C=()=>{s();const[r,i]=n.useState(!0),[a,o]=n.useState({count:0,lists:[]}),[d,l]=n.useState({start_date:"",end_date:"",page:1,limit:50}),{data:x}=h(d,{enabled:!0});return n.useEffect((()=>{if(x){const{count:e,lists:t}=x;o({count:e,lists:[...a.lists,...t]})}}),[x,r]),e.jsxs(t,{children:[e.jsx(c,{title:"위치이력 열람 내역"}),e.jsx(g,{onSearch:e=>{o({count:0,lists:[]}),i((e=>!e)),l({...d,...e,page:1})}}),a&&e.jsx(t,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:e.jsx(p,{checkboxSelection:!1,rows:null==a?void 0:a.lists,rowCount:null==a?void 0:a.count,columns:b,sort:{field:"id",orderby:"desc"},onPageChange:e=>{const t=parseInt("10");e>0&&(e+1)*t>=a.lists.length&&l({...d,page:d.page+1})},onRowClick:({row:e})=>{},pageInit:1===d.page})})]})};export{C as LocViewListPage};
