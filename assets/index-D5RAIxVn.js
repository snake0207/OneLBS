import{j as e,B as t,S as i,T as s,O as r,r as n}from"./index-DNBezHmp.js";import{b as a,c as o,d,e as l,M as x,a as p}from"./index-K9FZnq_n.js";import{C as h}from"./index-4-V6eLgu.js";import{u as c,g as m,a as u}from"./facility-IDD5Pcig.js";import{u as j}from"./formik.esm-DhXVXXHr.js";import{S as g}from"./index-DgBZXdG5.js";import{D as f}from"./index-rEwVhy06.js";import{T as w}from"./index-BH5Sabbh.js";import"./index-BfV9KbSX.js";import"./index-Q7s2wh8K.js";import"./TextField-rg4txBXg.js";import"./MenuItem-DrfqH9qa.js";import"./Close-Didp81Oi.js";import"./FormControlLabel-DM4QGyIb.js";import"./InputAdornment-BGi_TbIT.js";const b={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0"},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"15%"}};function C({onSearch:r}){const n=j({initialValues:{startDate:"",endDate:"",start_time:String((new Date).getHours()),end_time:String((new Date).getHours()),type:"T"},onSubmit:e=>{const t=`${e.startDate.split("-").join("")}${e.start_time}`,i=`${e.endDate.split("-").join("")}${e.end_time}`;r&&r({startDate:t,endDate:i,type:e.type})}});return e.jsx(t,{sx:b.searchBox,children:e.jsx(a,{sx:b.tableBox,children:e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(l,{sx:{},colSpan:3,children:"조회기간"}),e.jsx(l,{sx:{},colSpan:3,children:"구분"})]}),e.jsxs(d,{children:[e.jsx(l,{sx:{width:"64%"},colSpan:3,children:e.jsxs(i,{direction:"row",spacing:.1,alignItems:"center",width:"100%",children:[e.jsx(f,{name:"startDate",formik:n}),e.jsx(w,{name:"start_time",formik:n}),e.jsx(s,{children:"~"}),e.jsx(f,{name:"endDate",formik:n}),e.jsx(w,{name:"end_time",formik:n})]})}),e.jsx(l,{sx:{width:"20%"},colSpan:2,children:e.jsx(g,{name:"type",formik:n,items:c(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(l,{align:"right",children:e.jsx(x,{disabled:!n.values.startDate||!n.values.endDate,name:"search",title:"검색",onClick:n.handleSubmit})})]})]})})})}const S=[{field:"id",headerName:"ID",width:100,renderCell:t=>e.jsx(s,{children:t.row.id})},{field:"type",headerName:"구분",width:180,renderCell:t=>e.jsx(s,{color:"primary",children:void 0!==m[t.row.type]?m[t.row.type].label:`${t.row.type} is not exist`})},{field:"startTime",headerName:"시작 일시",width:200,renderCell:t=>e.jsx(s,{children:t.row.startTime})},{field:"finishTime",headerName:"종료 일시",width:200,renderCell:t=>e.jsx(s,{children:t.row.finishTime})},{field:"elapsedTime",headerName:"소요시간(분)",width:150,align:"right",renderCell:t=>e.jsx(s,{children:t.row.elapsedTime})},{field:"rawCount",headerName:"원천 데이터 수",width:200,align:"right",renderCell:t=>e.jsx(s,{children:t.row.rawCount.toLocaleString()})},{field:"updateCount",headerName:"현행화 데이터 수",width:200,align:"right",renderCell:t=>e.jsx(s,{children:t.row.updateCount.toLocaleString()})}],y=()=>{r();const[i,a]=n.useState(!0),[o,d]=n.useState({count:0,lists:[]}),[l,x]=n.useState({type:"T",page:1,limit:50}),{data:c}=u(l,{enabled:i});return n.useEffect((()=>{if(i&&c&&"0000"===(null==c?void 0:c.code)){const{totalCount:e,lists:t}=null==c?void 0:c.data;a(!1),d({count:e,lists:[...o.lists,...t]})}}),[c,l]),e.jsxs(t,{children:[e.jsx(p,{title:"정보 현행화 이력"}),e.jsx(C,{onSearch:e=>{d({count:0,lists:[]}),x({...l,...e,page:1}),a(!0)}}),e.jsxs(t,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(t,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(s,{sx:{fontSize:"14px"},children:`Total Count: ${o.count}`})}),e.jsx(h,{rows:null==o?void 0:o.lists,rowCount:null==o?void 0:o.count,columns:S,sort:{field:"id",orderby:"desc"},onPageChange:e=>{const t=parseInt("10");e>0&&(e+1)*t>=o.lists.length&&(x({...l,page:l.page+1}),a(!0))},onRowClick:({row:e})=>{},pageInit:1===l.page})]})]})};export{y as SyncHistoryPage};
