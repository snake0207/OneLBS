function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/SearchPopup-UHJ-TbSB.js","assets/index-CMVj578i.js","assets/index-Ccs25vvN.js","assets/index-t3WTL6mH.js","assets/TextField-DlvKLlcX.js","assets/formik.esm-Bxiyl05w.js","assets/InputAdornment-QnwYxBBF.js","assets/user-CNtgS8lX.js","assets/cjs-CC7bO--q.js","assets/index-RSFPSF8C.js","assets/index-B7o4kVWo.js","assets/index-D7cOxX97.js","assets/index-BG4KGtcg.js","assets/useSlot-DDTYWnPv.js","assets/Close-DL26paGk.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{j as e,B as x,T as p,O as D,r as d,N as v,Y as B,S as F}from"./index-CMVj578i.js";import{b as N,c as P,d as a,e as n,M as $,a as R,f as k}from"./index-Ccs25vvN.js";import{C as W}from"./index-ClziLJHD.js";import{d as H,e as Q,f as J,g as q}from"./user-CNtgS8lX.js";import{u as L}from"./formik.esm-Bxiyl05w.js";import{T as o}from"./index-t3WTL6mH.js";import{S as E}from"./index-C4QpMhE_.js";import{d as M}from"./Create-DJ5rYpL2.js";import{r as V}from"./validationSchema-DXpzI1gB.js";import"./index-RSFPSF8C.js";import"./index-BG4KGtcg.js";import"./TextField-DlvKLlcX.js";import"./MenuItem-Cq3gzPAw.js";import"./Close-DL26paGk.js";import"./FormControlLabel-DqmbKUpD.js";import"./InputAdornment-QnwYxBBF.js";import"./index.esm-Dr_LpQno.js";const U=()=>[{key:"A",value:"A",label:"관리자"},{key:"O",value:"O",label:"운영자"}],A={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0","&:nth-of-type(even)":{pr:"40px"}},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"25%"}};function G({onSearch:s}){const r=()=>[{key:"T",value:"T",label:"전체"},...U()],h=L({initialValues:{userId:"",authType:"T"},onSubmit:f=>{s&&s(f)}});return e.jsx(x,{sx:A.searchBox,children:e.jsx(N,{sx:A.tableBox,children:e.jsx(P,{children:e.jsxs(a,{children:[e.jsx(n,{sx:A.cellTitle,children:"권한"}),e.jsx(n,{sx:A.cellInput,children:e.jsx(E,{name:"authType",formik:h,items:r(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(n,{sx:A.cellTitle,children:"아이디"}),e.jsx(n,{sx:A.cellInput,children:e.jsx(o,{name:"userId",formik:h,sx:{width:"100%"}})}),e.jsx(n,{align:"right",children:e.jsx($,{name:"search",title:"검색",onClick:h.handleSubmit})})]})})})})}const Y={A:{label:"관리자"},O:{label:"운영자"},"00001":{label:"슈퍼관리자"}},K=[{field:"id",headerName:"ID",flex:.8,renderCell:s=>e.jsx(p,{children:s.row.id})},{field:"userId",headerName:"아이디",flex:1,renderCell:s=>e.jsx(p,{color:"primary",children:s.row.userId})},{field:"authType",headerName:"권한",flex:.8,renderCell:s=>e.jsx(p,{children:Y[s.row.authType].label})},{field:"cropName",headerName:"소속",flex:1,renderCell:s=>e.jsx(p,{children:s.row.cropName})},{field:"loginFailCount",headerName:"로그인 실패",flex:1,align:"center",renderCell:s=>e.jsx(p,{children:s.row.loginFailCount})},{field:"lastLoginTime",headerName:"마지막 로그인",flex:1.5,renderCell:s=>e.jsx(p,{children:s.row.lastLoginTime})},{field:"regDate",headerName:"등록일시",flex:1.5,renderCell:s=>e.jsx(p,{children:s.row.regDate})},{field:"updDate",headerName:"변경일시",flex:1.5,renderCell:s=>e.jsx(p,{children:s.row.updDate})}],X=()=>{const s=D(),[r,h]=d.useState({count:0,lists:[]}),[f,b]=d.useState(!0),[c,S]=d.useState({authType:"T",page:1,limit:parseInt("50")}),{mutate:y,isPending:g}=H(),t=l=>{h({count:0,lists:[]}),S({...c,...l,page:1}),b(!0)},i=({row:l})=>{s("/user/user-edit",{state:{row:l}})},T=l=>{const _=parseInt("10"),u=(l+1)*_;l>0&&u>=r.lists.length&&(S({...c,page:c.page+1}),b(!0))};return d.useEffect(()=>{f&&y({...c},{onSuccess:({data:l})=>{if(console.log("Search response : ",l),(l==null?void 0:l.code)==="0000"){const{totalCount:_,lists:u}=l==null?void 0:l.data;b(!1),h({count:_,lists:[...r.lists,...u]})}}})},[c]),e.jsxs(x,{children:[e.jsx(R,{title:"사용자 정보관리"}),e.jsx(G,{onSearch:t}),r&&e.jsxs(x,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsxs(x,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(p,{sx:{fontSize:"14px"},children:`Total Count: ${r==null?void 0:r.count}`}),e.jsx(x,{sx:{display:"flex",justifyContent:"space-between",gap:2},children:e.jsx($,{disabled:g,name:"create",title:"사용자 등록",onClick:()=>s("/user/user-regist",{state:{row:"acro0720"}})})})]}),e.jsx(W,{rows:r==null?void 0:r.lists,rowCount:r==null?void 0:r.count,columns:K,sort:{field:"id",orderby:"desc"},onPageChange:T,onRowClick:i,pageInit:c.page===1})]})]})},Te=X,I={contentBox:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},table_info:{width:"90%",mb:3,th:{width:"20%",border:"1px solid",borderColor:"table.viewTopBorder"},td:{pt:1,pb:1,width:"25%",border:"1px solid",borderColor:"table.viewTopBorder"},tr:{"& th:first-of-type":{borderLeft:"none"},"& th:last-child":{borderRight:"none"},"& td:last-child":{borderRight:"none"}}},table_set_option:{mb:3,th:{pt:1,pb:1,width:"20%",border:"1px solid",borderColor:"table.viewTopBorder"},td:{pt:1,pb:1,width:"20%",border:"1px solid",borderColor:"table.viewTopBorder"},tr:{"& th:first-of-type":{borderLeft:"none"},"& th:last-child":{borderRight:"none"},"& td:last-child":{borderRight:"none"}}}},Z=d.lazy(()=>v(()=>import("./SearchPopup-UHJ-TbSB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),ee=d.lazy(()=>v(()=>import("./index-B7o4kVWo.js"),__vite__mapDeps([10,1,8,9]))),se=d.lazy(()=>v(()=>import("./index-D7cOxX97.js"),__vite__mapDeps([11,1,12,13,14]))),ne=()=>{B();const s=D(),[r,h]=d.useState(!1),{mutate:f,isPending:b}=Q(),[c,S]=d.useState(""),[y,g]=d.useState({msg:"입력한 정보로 저장 하시겠습니까?",openDialog:!1}),t=L({initialValues:{userId:"",cropName:"",phoneNum:"",authType:"O",ipAddr_1:"",ipAddr_2:"",ipAddr_3:"",ipAddr_4:"",ipAddr_5:""},validationSchema:V,onSubmit:u=>{const m=[...new Set([t.values.ipAddr_1,t.values.ipAddr_2,t.values.ipAddr_3,t.values.ipAddr_4,t.values.ipAddr_5])].filter(j=>j.length>0),w={userId:t.values.userId,cropName:t.values.cropName,phoneNum:t.values.phoneNum,authType:t.values.authType,ipAddr:[...m]};console.log("onSubmit >> ",JSON.stringify(w,null,2)),f({...w},{onSuccess:({data:j})=>{console.log("response : ",j),S(`API RESULT : ${j==null?void 0:j.data}(${j==null?void 0:j.code})`)}})}}),i=()=>{g(u=>({...u,openDialog:!0}))},T=()=>{console.log("handleFormikSubmit.."),t.handleSubmit(),l()},l=()=>{g(u=>({...u,openDialog:!1}))},_=()=>{h(!0)};return e.jsxs(x,{children:[e.jsx(R,{title:"사용자 등록"}),e.jsx("form",{style:{width:"100%"},children:e.jsxs(x,{sx:I.contentBox,children:[e.jsxs(x,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(M,{}),e.jsx(p,{sx:{ml:1,fontSize:"16px",fontWeight:500,color:"text.darkgray"},children:"기본 정보"})]}),e.jsxs(p,{fontSize:"small",sx:{color:"text.darkgray"},children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"필수 입력입니다."]}),e.jsx(N,{sx:I.table_info,children:e.jsxs(P,{children:[e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"아이디"]}),e.jsx(n,{component:"td",children:e.jsx(o,{name:"userId",formik:t,editClick:_})}),e.jsxs(n,{children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"소속"]}),e.jsx(n,{component:"td",children:e.jsx(o,{name:"cropName",formik:t})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"전화번호"}),e.jsx(n,{component:"td",children:e.jsx(o,{name:"phoneNum",formik:t})}),e.jsxs(n,{children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"권한"]}),e.jsx(n,{component:"td",children:e.jsx(E,{name:"authType",formik:t,items:U(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})})]}),e.jsxs(a,{children:[e.jsx(n,{rowSpan:5,children:"접속 허용 IP 목록"}),e.jsxs(n,{children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"ip-address-1"]}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_1",formik:t})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"ip-address-2"}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_2",formik:t})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"ip-address-3"}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_3",formik:t})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"ip-address-4"}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_4",formik:t})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"ip-address-5"}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_5",formik:t})})]})]})}),e.jsx(x,{sx:{width:"90%",justifyContent:"flex-end"},children:e.jsxs(F,{spacing:2,direction:"row",sx:{justifyContent:"flex-end"},children:[e.jsx(k,{disabled:b,name:"list",title:"취소",onClick:()=>s("/user/user-list")}),e.jsx(k,{disabled:b,name:"create",title:"저장",onClick:i})]})})]})}),y.openDialog&&e.jsx(Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ee,{isOpen:y.openDialog,content:y.msg,onCancel:l,onConfirm:T})}),c&&e.jsx(Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(se,{msg:c,autoHideDuration:5e3,callback:()=>{S(!1),s("/user/user-list")}})}),r&&e.jsx(Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(Z,{isOpen:r,title:"사용자 아이디 중복 체크",onCancel:()=>h(!1),onConfirm:u=>{h(!1),t.setFieldValue("userId",u)}})})]})},te=()=>e.jsx(e.Fragment,{children:e.jsx(ne,{})}),ke=te,ie=d.lazy(()=>v(()=>import("./index-B7o4kVWo.js"),__vite__mapDeps([10,1,8,9]))),re=d.lazy(()=>v(()=>import("./index-D7cOxX97.js"),__vite__mapDeps([11,1,12,13,14]))),le=()=>{const{state:{row:s}}=B(),r=D();d.useState(!0);const{mutate:h,isPending:f}=J(),{mutate:b,isPending:c}=q(),[S,y]=d.useState(""),[g,t]=d.useState({edit:!1,delete:!1,msg:"",openDialog:!1}),i=L({initialValues:{userId:s==null?void 0:s.userId,cropName:s==null?void 0:s.cropName,authType:s==null?void 0:s.authType,phoneNum:(s==null?void 0:s.phoneNum)||"",ipAddr_1:(s==null?void 0:s.ipAddr[0])||"",ipAddr_2:(s==null?void 0:s.ipAddr[1])||"",ipAddr_3:(s==null?void 0:s.ipAddr[2])||"",ipAddr_4:(s==null?void 0:s.ipAddr[3])||"",ipAddr_5:(s==null?void 0:s.ipAddr[4])||""},validationSchema:V,onSubmit:m=>{console.log("handleFormikSubmit..");const j=[...new Set([i.values.ipAddr_1,i.values.ipAddr_2,i.values.ipAddr_3,i.values.ipAddr_4,i.values.ipAddr_5])].filter(C=>C.length>0),O={userId:s==null?void 0:s.userId,cropName:i.values.cropName,phoneNum:i.values.phoneNum,authType:i.values.authType,ipAddr:[...j]};console.log("onSubmit >> ",JSON.stringify(O,null,2)),b({...O},{onSuccess:({data:C})=>{console.log("update-response : ",C),y(`UPDATE RESULT : ${C==null?void 0:C.data}`)}})}}),T=()=>{console.log("handleDeleteSubmit..."),h({userId:s==null?void 0:s.userId},{onSuccess:({data:m})=>{console.log("delete-response : ",m),y(`DELETE RESULT : ${m==null?void 0:m.data}`)}})},l=()=>{g.edit&&i.handleSubmit(),g.delete&&T(),_()},_=()=>{t({edit:!1,delete:!1,msg:"",openDialog:!1})},u=()=>{t(m=>({...m,edit:!0,msg:"수정한 정보로 저장 하시겠습니까?",openDialog:!0}))},z=()=>{t(m=>({...m,delete:!0,msg:"삭제하면 복구가 불가능합니다. 삭제 하시겠습니까?",openDialog:!0}))};return e.jsxs(x,{children:[e.jsx(R,{title:"사용자 정보 수정"}),e.jsx("form",{style:{width:"100%"},children:e.jsxs(x,{sx:I.contentBox,children:[e.jsxs(x,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(M,{}),e.jsx(p,{sx:{ml:1,fontSize:"16px",fontWeight:500,color:"text.darkgray"},children:"기본 정보"})]}),e.jsxs(p,{fontSize:"small",sx:{color:"text.darkgray"},children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"필수 입력입니다."]}),e.jsx(N,{sx:I.table_info,children:e.jsxs(P,{children:[e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"아이디"]}),e.jsx(n,{component:"td",children:e.jsx(o,{name:"userId",formik:i,IsDisabled:!0})}),e.jsxs(n,{children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"소속"]}),e.jsx(n,{component:"td",children:e.jsx(o,{name:"cropName",formik:i})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"전화번호"}),e.jsx(n,{component:"td",children:e.jsx(o,{name:"phoneNum",formik:i})}),e.jsxs(n,{children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"권한"]}),e.jsx(n,{component:"td",children:e.jsx(E,{name:"authType",formik:i,items:U(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})})]}),e.jsxs(a,{children:[e.jsx(n,{rowSpan:5,children:"접속 허용 IP 목록"}),e.jsxs(n,{children:[e.jsx("span",{style:{color:"red",fontSize:"13px"},children:"*"}),"ip-address-1"]}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_1",formik:i})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"ip-address-2"}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_2",formik:i})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"ip-address-3"}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_3",formik:i})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"ip-address-4"}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_4",formik:i})})]}),e.jsxs(a,{children:[e.jsx(n,{children:"ip-address-5"}),e.jsx(n,{component:"td",colSpan:2,children:e.jsx(o,{name:"ipAddr_5",formik:i})})]})]})}),e.jsx(x,{sx:{width:"90%",align:"right"},children:e.jsxs(F,{spacing:2,direction:"row",sx:{justifyContent:"flex-end",mr:2},children:[e.jsx(k,{disabled:f||c,name:"cancel",title:"목록",onClick:()=>r("/user/user-list")}),e.jsx(k,{disabled:f||c,name:"edit",title:"수정",onClick:u}),e.jsx(k,{disabled:f||c,name:"delete",title:"삭제",onClick:z})]})})]})}),g.openDialog&&e.jsx(d.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ie,{isOpen:g.openDialog,content:g.msg,onCancel:_,onConfirm:l})}),S&&e.jsx(d.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(re,{msg:S,autoHideDuration:3e3,callback:()=>r("/user/user-list")})})]})},oe=()=>e.jsx(e.Fragment,{children:e.jsx(le,{})}),ve=oe;export{ve as UserEditPage,Te as UserListPage,ke as UserRegistPage};
