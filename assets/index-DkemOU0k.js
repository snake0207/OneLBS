function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/OllehMap-BkfRv8bz.js","assets/index-CtGT7pB0.js","assets/olleh_map-cbgdSS3j.js","assets/index-DanmpxUh.js","assets/cjs-CzLYHR4S.js","assets/index-C6TEBvmk.js","assets/index-mlOjgIiv.js","assets/index-DE0F4aPm.js","assets/useSlot-BcLOKpuP.js","assets/Close-CTx8nZBT.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{o as e,p as l,j as i,B as s,r as t,N as d,T as a,k as n,S as o}from"./index-CtGT7pB0.js";import{d as r}from"./PlaylistAddCheckOutlined-DFeGMwqg.js";import{b as c,c as u,d as x,e as p,M as h,a as j,f as g}from"./index-CkwR4aEQ.js";import{u as m}from"./formik.esm-DAidWDL1.js";import{w as v,c as b,d as f,e as y,f as k,h as C}from"./facility-CHacVisC.js";import{S as w}from"./index-BN4gr2T-.js";import{T as S}from"./index-Ddq0Ofe6.js";import{T}from"./TableBody-D_BRbEmt.js";import"./TextField-D-bOuL6E.js";import"./MenuItem-BYlXn1lz.js";import"./InputAdornment-CN7O440v.js";var I={},D=l;Object.defineProperty(I,"__esModule",{value:!0});var _=I.default=void 0,E=D(e()),A=i;_=I.default=(0,E.default)((0,A.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.17-5.24-1.1-1.1c.71-1.33.53-3.01-.59-4.13C13.79 8.84 12.9 8.5 12 8.5c-.03 0-.06.01-.09.01L13 9.6l-1.06 1.06-2.83-2.83L11.94 5 13 6.06l-.96.96c1.27.01 2.53.48 3.5 1.44 1.7 1.71 1.91 4.36.63 6.3m-1.28 1.41L12.06 19 11 17.94l.95-.95c-1.26-.01-2.52-.5-3.48-1.46-1.71-1.71-1.92-4.35-.64-6.29l1.1 1.1c-.71 1.33-.53 3.01.59 4.13.7.7 1.63 1.04 2.56 1.01L11 14.4l1.06-1.06z"}),"ChangeCircleOutlined");const L={contentBox:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},table_base:{mb:3,th:{pt:1,pb:1,textAlign:"center",border:"1px solid",borderColor:"table.viewTopBorder"},td:{pt:.5,pb:.5,border:"1px solid",borderColor:"table.viewTopBorder"},"& tr:first-of-type":{"& th":{fontSize:"15px",color:"white",textAlign:"center"}}},cellTitle:{width:"8%",color:"white",backgroundColor:"#009ACC"},cellInput:{width:"14%"},cellInputWide:{width:"18%"}},P={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0"},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"15%"}};function V({onSearch:e}){const l=m({initialValues:{source:"W",mac:""},onSubmit:l=>{e&&e({...l})}});return i.jsx(s,{sx:P.searchBox,children:i.jsx(c,{sx:P.tableBox,children:i.jsx(u,{children:i.jsxs(x,{children:[i.jsx(p,{style:P.cellTitle,children:"시설구분"}),i.jsx(p,{style:P.cellInput,children:i.jsx(w,{name:"source",formik:l,items:v(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),i.jsx(p,{}),i.jsx(p,{style:P.cellTitle,children:"MAC 주소"}),i.jsx(p,{style:{width:"20%"},children:i.jsx(S,{name:"mac",formik:l})}),i.jsx(p,{align:"right",children:i.jsx(h,{disabled:!l.values.mac,name:"search",title:"검색",onClick:l.handleSubmit})})]})})})})}const W=t.lazy((()=>d((()=>import("./OllehMap-BkfRv8bz.js")),__vite__mapDeps([0,1,2])))),B=t.lazy((()=>d((()=>import("./index-DanmpxUh.js")),__vite__mapDeps([3,1,4,5])))),F=t.lazy((()=>d((()=>import("./index-mlOjgIiv.js")),__vite__mapDeps([6,1,7,8,9])))),M={mac:"",ssid:"",grade:0,building:"",floor:"",vap:{utmk:{latitude:"",longitude:""},wgs84:{latitude:"",longitude:""}},regDate:"",updDate:"",gridX:[],gridY:[],rssi:[],dataCount:[]},O=()=>{var e,l;const[d,u]=t.useState(!1),[h,v]=t.useState(!0),[w,I]=t.useState(""),[D,E]=t.useState({edit:!1,delete:!1,save:!1,msg:"",openDialog:!1}),[A,P]=t.useState({}),{mutate:O,isPending:R}=b(),{mutate:z,isPending:U}=f(),{mutate:Y,isPending:X}=y(),$={longitude:127.1279874,latitude:37.3998912,title:"KT 분당"},[q,G]=t.useState([$]),{data:H}=k(A,{enabled:d}),K=m({initialValues:M,onSubmit:e=>{const l={mac:e.mac,ssid:e.ssid,grade:e.grade||0,building:e.building||"",floor:e.floor||"",latitude:e.vap.wgs84.latitude,longitude:e.vap.wgs84.longitude,source:A.source||"C"};O({...l},{onSuccess:({data:e})=>{}})}}),N=()=>{E({edit:!1,delete:!1,save:!1,msg:"",openDialog:!1})},Q=t.useCallback((()=>{K.setValues({...M})}),[]),J=t.useCallback((()=>{E((e=>({...e,save:!0,msg:"입력한 정보로 저장 하시겠습니까?",openDialog:!0})))}),[]),Z=t.useCallback((()=>{E((e=>({...e,edit:!0,msg:"수정한 정보로 저장 하시겠습니까?",openDialog:!0})))}),[]),ee=t.useCallback((()=>{E((e=>({...e,delete:!0,msg:"삭제하면 복구가 불가능합니다. 삭제 하시겠습니까?",openDialog:!0})))}),[]),le=()=>{var e,l,i,s,t,d,a,n,o,r,c,u,x,p;K.setValues({...null==H?void 0:H.data}),K.setFieldValue("grade",(null==(e=null==H?void 0:H.data)?void 0:e.grade)||0),K.setFieldValue("building",(null==(l=null==H?void 0:H.data)?void 0:l.building)||""),K.setFieldValue("floor",(null==(i=null==H?void 0:H.data)?void 0:i.floor)||""),K.setFieldValue("updDate",(null==(s=null==H?void 0:H.data)?void 0:s.updDate)||"");const h={utmk:{longitude:null==(d=null==(t=null==H?void 0:H.data)?void 0:t.vap)?void 0:d.utmk[0],latitude:null==(n=null==(a=null==H?void 0:H.data)?void 0:a.vap)?void 0:n.utmk[1]},wgs84:{longitude:null==(r=null==(o=null==H?void 0:H.data)?void 0:o.vap)?void 0:r.wgs84[0],latitude:null==(u=null==(c=null==H?void 0:H.data)?void 0:c.vap)?void 0:u.wgs84[1]}};K.setFieldValue("vap",h),G([{...h.wgs84,title:(null==(x=null==H?void 0:H.data)?void 0:x.building)||(null==(p=null==H?void 0:H.data)?void 0:p.ssid)||""}])};return t.useEffect((()=>{d&&H&&(u(!1),I(`QUERY API RESULT ${null==H?void 0:H.message}`),"0000"===(null==H?void 0:H.code)?le():(K.setValues({...M}),G([$])))}),[H,A]),i.jsxs(s,{children:[i.jsx(j,{title:"WiFi 시설정보"}),i.jsx(V,{onSearch:e=>{v(!1),P({...A,...e}),u(!0)}}),i.jsxs(s,{sx:L.contentBox,children:[i.jsxs(s,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[i.jsxs(s,{display:"flex",alignItems:"center",children:[i.jsx(r,{}),i.jsx(a,{sx:{ml:1,fontSize:"16px",fontWeight:500,color:"text.darkgray"},children:"검색 결과"})]}),i.jsx(s,{children:h?i.jsx(n,{onClick:()=>{v(!1),"0000"===(null==H?void 0:H.code)&&le()},startIcon:i.jsx(_,{}),children:"편집 화면으로 전환"}):i.jsx(n,{onClick:()=>{Q(),v(!0)},startIcon:i.jsx(_,{}),children:"등록 화면으로 전환"})})]}),i.jsx(s,{children:i.jsx("form",{children:i.jsx(c,{sx:L.table_base,children:i.jsxs(T,{children:[i.jsxs(x,{children:[i.jsx(p,{style:L.cellTitle,children:"MAC"}),i.jsx(p,{style:L.cellInput,children:i.jsx(S,{name:"mac",formik:K})}),i.jsx(p,{style:L.cellTitle,children:"SSID"}),i.jsx(p,{style:L.cellInput,children:i.jsx(S,{name:"ssid",formik:K})}),i.jsx(p,{style:L.cellTitle,children:"Grade"}),i.jsx(p,{style:L.cellInputWide,children:i.jsx(S,{name:"grade",formik:K})}),i.jsx(p,{style:L.cellTitle,children:"신뢰도"}),i.jsx(p,{style:L.cellInputWide,children:i.jsx(a,{children:(null==(e=null==H?void 0:H.data)?void 0:e.hasOwnProperty("grade"))&&null!==(null==(l=null==H?void 0:H.data)?void 0:l.grade)?C[K.values.grade].label:""})})]}),i.jsxs(x,{children:[i.jsx(p,{style:L.cellTitle,children:"Building"}),i.jsx(p,{style:L.cellInput,children:i.jsx(S,{name:"building",formik:K})}),i.jsx(p,{style:L.cellTitle,children:"Floor"}),i.jsx(p,{style:L.cellInput,children:i.jsx(S,{name:"floor",formik:K})}),i.jsx(p,{style:L.cellTitle,children:""}),i.jsx(p,{style:L.cellInputWide,children:""}),i.jsx(p,{style:L.cellTitle,children:""}),i.jsx(p,{style:L.cellInputWide,children:""})]}),i.jsxs(x,{children:[i.jsx(p,{style:L.cellTitle,children:"위도"}),i.jsx(p,{style:L.cellInput,children:i.jsx(S,{name:"vap.wgs84.latitude",formik:K})}),i.jsx(p,{style:L.cellTitle,children:"경도"}),i.jsx(p,{style:L.cellInput,children:i.jsx(S,{name:"vap.wgs84.longitude",formik:K})}),i.jsx(p,{style:L.cellTitle,children:"생성일시"}),i.jsx(p,{style:L.cellInputWide,children:i.jsx(S,{name:"regDate",formik:K})}),i.jsx(p,{style:L.cellTitle,children:"갱신일시"}),i.jsx(p,{style:L.cellInputWide,children:i.jsx(S,{name:"updDate",formik:K})})]})]})})})}),i.jsx(s,{sx:{width:"100%",height:"400px",mb:4},children:!d&&q.length>0&&i.jsx(t.Suspense,{fallback:i.jsx("div",{children:"Map Loading..."}),children:i.jsx(W,{locations:[...q],gridX:h?[]:"0000"===(null==H?void 0:H.code)?K.values.gridX:null,gridY:h?[]:"0000"===(null==H?void 0:H.code)?K.values.gridY:null,rssi:h?[]:"0000"===(null==H?void 0:H.code)?K.values.rssi:null,modeCreate:h,onMapClick:e=>(e=>{K.setFieldValue("vap.wgs84",e),G([e])})(e)})})}),i.jsx(s,{align:"right",children:i.jsx(o,{spacing:2,direction:"row",sx:{justifyContent:"flex-end"},children:h?i.jsxs(i.Fragment,{children:[i.jsx(g,{disabled:R,name:"cancel",title:"초기화",onClick:Q}),i.jsx(g,{disabled:R,name:"create",title:"저장",onClick:J})]}):i.jsxs(i.Fragment,{children:[i.jsx(g,{disabled:U||X,name:"edit",title:"수정",onClick:Z}),i.jsx(g,{disabled:U||X,name:"delete",title:"삭제",onClick:ee})]})})})]}),D.openDialog&&i.jsx(t.Suspense,{fallback:i.jsx("div",{children:"Map Loading..."}),children:i.jsx(B,{isOpen:D.openDialog,content:D.msg,onCancel:N,onConfirm:()=>{var e;D.save&&K.handleSubmit(),D.edit&&(()=>{const e={mac:K.values.mac,ssid:K.values.ssid,grade:K.values.grade||0,building:K.values.building||"",floor:K.values.floor||"",latitude:K.values.vap.wgs84.latitude,longitude:K.values.vap.wgs84.longitude,source:A.source};Y({...e},{onSuccess:({data:e})=>{I(`UPDATE API RESULT ${null==e?void 0:e.data}`),"0000"===(null==e?void 0:e.code)&&u(!0)}}),N()})(),D.delete&&(z({mac:null==(e=null==H?void 0:H.data)?void 0:e.mac,source:A.source},{onSuccess:({data:e})=>{I(`DELETE API RESULT ${null==e?void 0:e.data}`),"0000"===(null==e?void 0:e.code)&&u(!0)}}),N()),N()}})}),w&&i.jsx(t.Suspense,{fallback:i.jsx("div",{children:"Map Loading..."}),children:i.jsx(F,{msg:w,autoHideDuration:3e3,callback:()=>I("")})})]})},R=()=>i.jsx(i.Fragment,{children:i.jsx(O,{})});export{R as WifiInfoMapPage};
