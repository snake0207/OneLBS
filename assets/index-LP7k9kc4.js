import{j as e,B as p,S as C,T as s,O as T,r as c}from"./index-Zwjsjf_e.js";import{b as D,c as k,d as m,e as l,M as B,a as I}from"./index-CIhg3QXE.js";import{C as N}from"./index-DDWb-XS6.js";import{u as H,g as u,a as $}from"./facility-BoIEmn-S.js";import{u as P}from"./formik.esm-DxgWIguA.js";import{S as _}from"./index-CkT4d0Nt.js";import{D as g}from"./index-BIFGUC3g.js";import{T as w}from"./index-D6lVn7oh.js";import"./index-DxA-rrMr.js";import"./index-DOeUa9Au.js";import"./TextField-C_ArUhJ2.js";import"./MenuItem-B4bxXtLY.js";import"./Close-DdxGh4K7.js";import"./FormControlLabel-BYqcm0yL.js";import"./InputAdornment-BudvL8JH.js";const j={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0"},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"15%"}};function z({onSearch:t}){const i=P({initialValues:{startDate:"",endDate:"",start_time:String(new Date().getHours()),end_time:String(new Date().getHours()),type:"T"},onSubmit:r=>{const d=`${r.startDate.split("-").join("")}${r.start_time}`,n=`${r.endDate.split("-").join("")}${r.end_time}`;t&&t({startDate:d,endDate:n,type:r.type})}});return e.jsx(p,{sx:j.searchBox,children:e.jsx(D,{sx:j.tableBox,children:e.jsxs(k,{children:[e.jsxs(m,{children:[e.jsx(l,{sx:{},colSpan:3,children:"조회기간"}),e.jsx(l,{sx:{},colSpan:3,children:"구분"})]}),e.jsxs(m,{children:[e.jsx(l,{sx:{width:"64%"},colSpan:3,children:e.jsxs(C,{direction:"row",spacing:.1,alignItems:"center",width:"100%",children:[e.jsx(g,{name:"startDate",formik:i}),e.jsx(w,{name:"start_time",formik:i}),e.jsx(s,{children:"~"}),e.jsx(g,{name:"endDate",formik:i}),e.jsx(w,{name:"end_time",formik:i})]})}),e.jsx(l,{sx:{width:"20%"},colSpan:2,children:e.jsx(_,{name:"type",formik:i,items:H(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(l,{align:"right",children:e.jsx(B,{disabled:!i.values.startDate||!i.values.endDate,name:"search",title:"검색",onClick:i.handleSubmit})})]})]})})})}const F=[{field:"id",headerName:"ID",width:100,renderCell:t=>e.jsx(s,{children:t.row.id})},{field:"type",headerName:"구분",width:180,renderCell:t=>e.jsx(s,{color:"primary",children:u[t.row.type]!==void 0?u[t.row.type].label:`${t.row.type} is not exist`})},{field:"startTime",headerName:"시작 일시",width:200,renderCell:t=>e.jsx(s,{children:t.row.startTime})},{field:"finishTime",headerName:"종료 일시",width:200,renderCell:t=>e.jsx(s,{children:t.row.finishTime})},{field:"elapsedTime",headerName:"소요시간(분)",width:150,align:"right",renderCell:t=>e.jsx(s,{children:t.row.elapsedTime})},{field:"rawCount",headerName:"원천 데이터 수",width:200,align:"right",renderCell:t=>e.jsx(s,{children:t.row.rawCount.toLocaleString()})},{field:"updateCount",headerName:"현행화 데이터 수",width:200,align:"right",renderCell:t=>e.jsx(s,{children:t.row.updateCount.toLocaleString()})}],L=()=>{T();const[t,i]=c.useState(!0),[r,d]=c.useState({count:0,lists:[]}),[n,x]=c.useState({type:"T",page:1,limit:50}),{data:a}=$(n,{enabled:t}),f=o=>{d({count:0,lists:[]}),x({...n,...o,page:1}),i(!0)},y=({row:o})=>{},S=o=>{const h=parseInt("10"),b=(o+1)*h;o>0&&b>=r.lists.length&&(x({...n,page:n.page+1}),i(!0))};return c.useEffect(()=>{if(t&&a&&(a==null?void 0:a.code)==="0000"){const{totalCount:o,lists:h}=a==null?void 0:a.data;i(!1),d({count:o,lists:[...r.lists,...h]})}},[a,n]),console.log("fetchData : ",r),e.jsxs(p,{children:[e.jsx(I,{title:"정보 현행화 이력"}),e.jsx(z,{onSearch:f}),e.jsxs(p,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(p,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(s,{sx:{fontSize:"14px"},children:`Total Count: ${r.count}`})}),e.jsx(N,{rows:r==null?void 0:r.lists,rowCount:r==null?void 0:r.count,columns:F,sort:{field:"id",orderby:"desc"},onPageChange:S,onRowClick:y,pageInit:n.page===1})]})]})},Y=L;export{Y as SyncHistoryPage};
