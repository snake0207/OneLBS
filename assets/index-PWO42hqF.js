import{j as e,B as d,T as a,S as N,O as I,r as m}from"./index-Zwjsjf_e.js";import{b as y,c as g,d as u,e as r,M as D,a as P}from"./index-CIhg3QXE.js";import{C as M}from"./index-DDWb-XS6.js";import{a as R}from"./service-DisLG0W9.js";import{u as B}from"./formik.esm-DxgWIguA.js";import{S as x}from"./index-CkT4d0Nt.js";import{D as v}from"./index-BIFGUC3g.js";import{T as S}from"./index-D6lVn7oh.js";import{C as h}from"./index-DXlJ_WV9.js";import{T as b}from"./index-D9xLZxGV.js";import{a as F,u as _,b as V,c as G,d as O}from"./service-zx91cxfm.js";import"./index.esm-Bb6TRupK.js";import"./index-DxA-rrMr.js";import"./index-DOeUa9Au.js";import"./TextField-C_ArUhJ2.js";import"./MenuItem-B4bxXtLY.js";import"./Close-DdxGh4K7.js";import"./FormControlLabel-BYqcm0yL.js";import"./InputAdornment-BudvL8JH.js";const f={searchBox:{display:"flex",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"6px 10px 6px 0"},input:{height:"40px",pt:0,pb:0}}};function z({onSearch:l}){const s=B({initialValues:{dateType:"D",startDate:"",endDate:"",start_time:"00",end_time:String(new Date().getHours()),serviceCheck:!1,appIdCheck:!1,modelCheck:!1,opTypeCheck:!1,planeCheck:!1,posMethodCheck:!1,respCodeCheck:!1,service:"",appId:"",model:"",opType:"N",plane:"N",posMethod:"N",respCode:"N"},onSubmit:t=>{const i=`${t.startDate.split("-").join("")}${t.start_time}`,n=`${t.endDate.split("-").join("")}${t.end_time}`,p=t.opType==="N"?"":t.opType,o=t.plane==="N"?"":t.plane,C=t.posMethod==="N"?"":t.posMethod,j=t.respCode==="N"?"":t.respCode;l&&(delete t.start_time,delete t.end_time,l({...t,startDate:i,endDate:n,opType:p,plane:o,posMethod:C,respCode:j}))}});return e.jsxs(d,{sx:f.searchBox,flexDirection:"column",children:[e.jsxs(d,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{flex:1},children:e.jsx(a,{children:"시간 구분"})}),e.jsx(d,{sx:{flex:7},children:e.jsx(y,{sx:f.tableBox,children:e.jsx(g,{children:e.jsxs(u,{children:[e.jsx(r,{style:{width:"15%"},children:e.jsx(x,{name:"dateType",formik:s,items:F(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(r,{style:{width:"4%"}}),e.jsx(r,{style:{width:"8%"},children:"조회기간"}),e.jsx(r,{style:{width:"60%"},children:e.jsxs(N,{direction:"row",spacing:.1,alignItems:"center",width:"100%",children:[e.jsx(v,{name:"startDate",formik:s}),e.jsx(S,{name:"start_time",formik:s}),e.jsx(a,{children:"~"}),e.jsx(v,{name:"endDate",formik:s}),e.jsx(S,{name:"end_time",formik:s})]})})]})})})}),e.jsx(d,{sx:{flex:1}})]}),e.jsxs(d,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{flex:1},children:e.jsx(a,{children:"Group By"})}),e.jsx(d,{sx:{flex:7},children:e.jsx(y,{sx:f.tableBox,children:e.jsx(g,{children:e.jsx(u,{children:e.jsx(r,{colSpan:8,children:e.jsxs(d,{display:"flex",justifyContent:"space-between",children:[e.jsx(h,{checked:s.values.serviceCheck,onChange:t=>s.setFieldValue("serviceCheck",t.target.checked),value:s.values.serviceCheck,label:"서비스코드"}),e.jsx(h,{checked:s.values.appIdCheck,onChange:t=>s.setFieldValue("appIdCheck",t.target.checked),value:s.values.appIdCheck,label:"AppID"}),e.jsx(h,{checked:s.values.modelCheck,onChange:t=>s.setFieldValue("modelCheck",t.target.checked),value:s.values.modelCheck,label:"모델"}),e.jsx(h,{checked:s.values.opTypeCheck,onChange:t=>s.setFieldValue("opTypeCheck",t.target.checked),value:s.values.opTypeCheck,label:"OP Type"}),e.jsx(h,{checked:s.values.planeCheck,onChange:t=>s.setFieldValue("planeCheck",t.target.checked),value:s.values.planeCheck,label:"Plane"}),e.jsx(h,{checked:s.values.posMethodCheck,onChange:t=>s.setFieldValue("posMethodCheck",t.target.checked),value:s.values.posMethodCheck,label:"측위방식"}),e.jsx(h,{checked:s.values.respCodeCheck,onChange:t=>s.setFieldValue("respCodeCheck",t.target.checked),value:s.values.respCodeCheck,label:"응답코드"})]})})})})})}),e.jsx(d,{sx:{flex:1}})]}),e.jsxs(d,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{flex:1},children:e.jsx(a,{children:"검색 조건"})}),e.jsx(d,{sx:{flex:7},children:e.jsx(y,{sx:f.tableBox,children:e.jsxs(g,{children:[e.jsxs(u,{children:[e.jsx(r,{style:{width:"10%"},children:"서비스 코드"}),e.jsx(r,{style:{width:"15%"},children:e.jsx(b,{name:"service",formik:s})}),e.jsx(r,{style:{width:"10%"},children:"App ID"}),e.jsx(r,{style:{width:"15%"},children:e.jsx(b,{name:"appId",formik:s})}),e.jsx(r,{style:{width:"10%"},children:"단말 모델"}),e.jsx(r,{style:{width:"15%"},children:e.jsx(b,{name:"model",formik:s})}),e.jsx(r,{style:{width:"10%"},children:"OP Type"}),e.jsx(r,{style:{width:"15%"},children:e.jsx(x,{name:"opType",items:_(),formik:s,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})})]}),e.jsxs(u,{children:[e.jsx(r,{style:{width:"10%"},children:"Plane"}),e.jsx(r,{style:{width:"15%"},children:e.jsx(x,{name:"plane",items:V(),formik:s,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(r,{style:{width:"10%"},children:"측위 방식"}),e.jsx(r,{style:{width:"15%"},children:e.jsx(x,{name:"posMethod",items:G(),formik:s,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(r,{style:{width:"10%"},children:"응답 코드"}),e.jsx(r,{style:{width:"15%"},children:e.jsx(x,{name:"respCode",items:O(),formik:s,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})})]})]})})}),e.jsx(d,{sx:{flex:1,height:"100px",display:"flex",alignItems:"flex-end",pb:.5},children:e.jsx(D,{disabled:!s.values.startDate||!s.values.endDate,name:"search",title:"검색",onClick:s.handleSubmit})})]})]})}const $=[{field:"id",headerName:"ID",flex:.8,renderCell:l=>e.jsx(a,{children:l.row.id})},{field:"statDate",headerName:"통계일",flex:1.2,renderCell:l=>e.jsx(a,{color:"primary",children:l.row.statDate})},{field:"service",headerName:"서비스 코드",flex:1,renderCell:l=>e.jsx(a,{children:l.row.service})},{field:"appId",headerName:"APP ID",flex:1,renderCell:l=>e.jsx(a,{children:l.row.appId})},{field:"model",headerName:"단말 모델",flex:1,renderCell:l=>e.jsx(a,{children:l.row.model})},{field:"opType",headerName:"OP Type",flex:1,renderCell:l=>e.jsx(a,{children:l.row.opType})},{field:"plane",headerName:"Plane",flex:1,renderCell:l=>e.jsx(a,{children:l.row.plane})},{field:"posMethod",headerName:"측위 방식",flex:1,renderCell:l=>e.jsx(a,{children:l.row.posMethod})},{field:"respCode",headerName:"응답코드",flex:1,renderCell:l=>e.jsx(a,{children:l.row.respCode})},{field:"count",headerName:"전체",flex:1,renderCell:l=>e.jsx(a,{children:l.row.count.toLocaleString()})},{field:"successCnt",headerName:"성공",flex:1,renderCell:l=>e.jsx(a,{children:l.row.successCnt.toLocaleString()})},{field:"successRate",headerName:"성공률(%)",flex:1,renderCell:l=>e.jsx(a,{children:l.row.successRate})},{field:"elapsedTime",headerName:"평균응답(초)",flex:1,renderCell:l=>e.jsx(a,{children:l.row.elapsedTime})}],A=l=>{console.log("params : ",l);const s=[{field:"id",flex:.8,headerName:"ID",view:!0},{field:"statDate",flex:1.2,headerName:"통계일",view:!0},{field:"service",flex:1,headerName:"서비스 코드",view:l.serviceCheck},{field:"appId",flex:1,headerName:"APP ID",view:l.appIdCheck},{field:"model",flex:1,headerName:"단말 모델",view:l.modelCheck},{field:"opType",flex:1,headerName:"OP Type",view:l.opTypeCheck},{field:"plane",flex:1,headerName:"Plane",view:l.planeCheck},{field:"posMethod",flex:1,headerName:"측위 방식",view:l.posMethodCheck},{field:"respCode",flex:1,headerName:"응답코드",view:l.respCodeCheck},{field:"count",flex:1,headerName:"전체",view:!0},{field:"successCnt",flex:1,headerName:"성공",view:!0},{field:"successRate",flex:1,headerName:"성공률(%)",view:!0},{field:"elapsedTime",flex:1,headerName:"평균응답(초)",view:!0}];return s.filter(i=>i.view!==!1).length>6?s.filter(i=>i.view):s.map(i=>({...i,view:!0}))},E=()=>{I();const[l,s]=m.useState(!1),[t,i]=m.useState({count:0,lists:[]}),[n,p]=m.useState({page:1,limit:parseInt("50")}),{data:o}=R(n,{enabled:l}),C=c=>{i({count:0,lists:[]}),p({...n,...c,page:1}),s(!0)},j=({row:c})=>{},T=c=>{const w=parseInt("10"),k=(c+1)*w;c>0&&k>=t.lists.length&&(p({...n,page:n.page+1}),s(!0))};return m.useEffect(()=>{if(l&&o&&o.code==="0000"&&o.data){const{totalCount:c,lists:w}=o.data;s(!1),i(k=>({count:c,lists:[...k.lists,...w]}))}},[l,o]),console.log("fetchData : ",t),e.jsxs(d,{children:[e.jsx(P,{title:"서비스 세부 통계"}),e.jsx(z,{onSearch:C}),e.jsxs(d,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(d,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(a,{sx:{fontSize:"14px"},children:`Total Count: ${t.count}`})}),e.jsx(M,{rows:t==null?void 0:t.lists,rowCount:t==null?void 0:t.count,columns:t!=null&&t.count?A(n):$,sort:{field:"id",orderby:"desc"},onPageChange:T,onRowClick:j,activeTools:["export"],pageInit:n.page===1})]})]})},ne=E;export{ne as ServiceSubStatPage};
