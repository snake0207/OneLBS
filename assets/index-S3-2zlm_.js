import{j as e,B as c,T as a,O as b,r as d}from"./index-CMVj578i.js";import{b as C,c as S,d as T,e as x,M as y,a as I}from"./index-Ccs25vvN.js";import{C as N}from"./index-ClziLJHD.js";import{c as k}from"./service-DiJ9c__a.js";import{u as B}from"./formik.esm-Bxiyl05w.js";import{T as D}from"./index-t3WTL6mH.js";import{c as M,a as P}from"./index.esm-Dr_LpQno.js";import"./index-RSFPSF8C.js";import"./index-BG4KGtcg.js";import"./TextField-DlvKLlcX.js";import"./MenuItem-Cq3gzPAw.js";import"./Close-DL26paGk.js";import"./FormControlLabel-DqmbKUpD.js";import"./InputAdornment-QnwYxBBF.js";const p={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0"},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"35%"}};function $({onSearch:t}){const o=B({initialValues:{targetMdn:""},validationSchema:M({targetMdn:P().matches(/^\d{10}$|^\d{11}$/,"10~11자리 숫자를 입력해 주세요.")}),onSubmit:r=>{t&&t(r)}});return e.jsx(c,{sx:p.searchBox,children:e.jsx(C,{sx:p.tableBox,children:e.jsx(S,{children:e.jsxs(T,{children:[e.jsx(x,{sx:p.cellTitle,children:"전화번호"}),e.jsx(x,{style:{width:"20%"},children:e.jsx(D,{name:"targetMdn",formik:o})}),e.jsx(x,{align:"right",children:e.jsx(y,{name:"search",title:"검색",onClick:o.handleSubmit})})]})})})})}const i=1400,v=[{field:"id",headerName:"ID",width:i*(7/100),renderCell:t=>e.jsx(a,{children:t.row.id})},{field:"regDate",headerName:"등록 일시",width:i*(12/100),renderCell:t=>e.jsx(a,{children:t.row.regDate})},{field:"startDate",headerName:"시작 일시",width:i*(12/100),renderCell:t=>e.jsx(a,{children:t.row.startDate})},{field:"endDate",headerName:"종료 일시",width:i*(12/100),renderCell:t=>e.jsx(a,{children:t.row.endDate})},{field:"interval",headerName:"주기(초)",width:i*(7/100),align:"right",renderCell:t=>e.jsx(a,{children:t.row.interval})},{field:"requestorMdn",headerName:"요청자",width:i*(10/100),renderCell:t=>e.jsx(a,{children:t.row.requestorMdn})},{field:"targetMdn",headerName:"대상자",width:i*(10/100),renderCell:t=>e.jsx(a,{children:t.row.targetMdn})},{field:"urlPage",headerName:"URL",width:i*(30/100),renderCell:t=>e.jsx(a,{children:t.row.urlPage})}],E=()=>{b();const[t,o]=d.useState(!1),[r,u]=d.useState({count:0,lists:[]}),[l,g]=d.useState({page:1,limit:parseInt("50")}),{data:s}=k(l,{enabled:t}),m=n=>{u({count:0,lists:[]}),g({...l,...n,page:1}),o(!0)},f=({row:n})=>{},w=n=>{const h=parseInt("10"),j=(n+1)*h;n>0&&j>=r.lists.length&&(g({...l,page:l.page+1}),o(!0))};return d.useEffect(()=>{if(t&&s&&(s==null?void 0:s.code)==="0000"){const{totalCount:n,lists:h}=s==null?void 0:s.data;o(!1),u({count:n,lists:[...r.lists,...h]})}},[s,l]),console.log("fetchData : ",r),e.jsxs(c,{children:[e.jsx(I,{title:"위치 트리거 조회"}),e.jsx($,{onSearch:m}),e.jsxs(c,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(c,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(a,{sx:{fontSize:"14px"},children:`Total Count: ${r.count}`})}),e.jsx(N,{rows:r==null?void 0:r.lists,rowCount:r==null?void 0:r.count,columns:v,sort:{field:"id",orderby:"desc"},onPageChange:w,onRowClick:f,activeTools:["export"],pageInit:l.page===1})]})]})},J=E;export{J as TriggerListPage};
