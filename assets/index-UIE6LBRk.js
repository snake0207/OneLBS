import{j as e,B as r,T as a,S as I,O as N,r as p}from"./index-Zwjsjf_e.js";import{b as C,c as w,d as y,e as i,M as D,a as P}from"./index-CIhg3QXE.js";import{C as B}from"./index-DDWb-XS6.js";import{u as R}from"./service-DisLG0W9.js";import{u as _}from"./formik.esm-DxgWIguA.js";import{S as g}from"./index-CkT4d0Nt.js";import{D as k}from"./index-BIFGUC3g.js";import{T as b}from"./index-D6lVn7oh.js";import{C as x}from"./index-DXlJ_WV9.js";import{T as m}from"./index-D9xLZxGV.js";import{a as F,u as O}from"./service-zx91cxfm.js";import"./index-DxA-rrMr.js";import"./index-DOeUa9Au.js";import"./TextField-C_ArUhJ2.js";import"./MenuItem-B4bxXtLY.js";import"./Close-DdxGh4K7.js";import"./FormControlLabel-BYqcm0yL.js";import"./InputAdornment-BudvL8JH.js";const f={searchBox:{display:"flex",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"6px 10px 6px 0"},input:{height:"40px",pt:0,pb:0}}};function V({onSearch:t}){const s=_({initialValues:{dateType:"D",startDate:"",endDate:"",start_time:"00",end_time:String(new Date().getHours()),serviceCheck:!1,appIdCheck:!1,modelCheck:!1,opTypeCheck:!1,respCodeCheck:!1,service:"",appId:"",model:"",opType:"N",respCode:""},onSubmit:l=>{const d=`${l.startDate.split("-").join("")}${l.start_time}`,n=`${l.endDate.split("-").join("")}${l.end_time}`,h=l.opType==="N"?"":l.opType;t&&(delete l.start_time,delete l.end_time,t({...l,startDate:d,endDate:n,opType:h}))}});return e.jsxs(r,{sx:f.searchBox,flexDirection:"column",children:[e.jsxs(r,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(r,{sx:{flex:1},children:e.jsx(a,{children:"시간 구분"})}),e.jsx(r,{sx:{flex:5},children:e.jsx(C,{sx:f.tableBox,children:e.jsx(w,{children:e.jsxs(y,{children:[e.jsx(i,{style:{width:"15%"},children:e.jsx(g,{name:"dateType",formik:s,items:F(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(i,{style:{width:"4%"}}),e.jsx(i,{style:{width:"8%"},children:"조회기간"}),e.jsx(i,{style:{width:"60%"},children:e.jsxs(I,{direction:"row",spacing:.1,alignItems:"center",width:"100%",children:[e.jsx(k,{name:"startDate",formik:s}),e.jsx(b,{name:"start_time",formik:s}),e.jsx(a,{children:"~"}),e.jsx(k,{name:"endDate",formik:s}),e.jsx(b,{name:"end_time",formik:s})]})})]})})})}),e.jsx(r,{sx:{flex:1}})]}),e.jsxs(r,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(r,{sx:{flex:1},children:e.jsx(a,{children:"Group By"})}),e.jsx(r,{sx:{flex:5},children:e.jsx(C,{sx:f.tableBox,children:e.jsx(w,{children:e.jsx(y,{children:e.jsx(i,{colSpan:8,children:e.jsxs(r,{display:"flex",justifyContent:"space-between",children:[e.jsx(x,{checked:s.values.serviceCheck,onChange:l=>s.setFieldValue("serviceCheck",l.target.checked),value:s.values.serviceCheck,label:"서비스코드"}),e.jsx(x,{checked:s.values.appIdCheck,onChange:l=>s.setFieldValue("appIdCheck",l.target.checked),value:s.values.appIdCheck,label:"AppID"}),e.jsx(x,{checked:s.values.modelCheck,onChange:l=>s.setFieldValue("modelCheck",l.target.checked),value:s.values.modelCheck,label:"모델"}),e.jsx(x,{checked:s.values.opTypeCheck,onChange:l=>s.setFieldValue("opTypeCheck",l.target.checked),value:s.values.opTypeCheck,label:"OP Type"}),e.jsx(x,{checked:s.values.respCodeCheck,onChange:l=>s.setFieldValue("respCodeCheck",l.target.checked),value:s.values.respCodeCheck,label:"응답코드"})]})})})})})}),e.jsx(r,{sx:{flex:1}})]}),e.jsxs(r,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(r,{sx:{flex:1},children:e.jsx(a,{children:"검색 조건"})}),e.jsx(r,{sx:{flex:5},children:e.jsx(C,{sx:f.tableBox,children:e.jsx(w,{children:e.jsxs(y,{children:[e.jsx(i,{style:{width:"7%"},children:"서비스 코드"}),e.jsx(i,{style:{width:"10%"},children:e.jsx(m,{name:"service",formik:s})}),e.jsx(i,{style:{width:"7%"},children:"App ID"}),e.jsx(i,{style:{width:"10%"},children:e.jsx(m,{name:"appId",formik:s})}),e.jsx(i,{style:{width:"7%"},children:"단말 모델"}),e.jsx(i,{style:{width:"10%"},children:e.jsx(m,{name:"model",formik:s})}),e.jsx(i,{style:{width:"7%"},children:"OP Type"}),e.jsx(i,{style:{width:"10%"},children:e.jsx(g,{name:"opType",items:O(),formik:s,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(i,{style:{width:"7%"},children:"응답 코드"}),e.jsx(i,{style:{width:"10%"},children:e.jsx(m,{name:"respCode",formik:s})})]})})})}),e.jsx(r,{sx:{flex:1,display:"flex",alignItems:"flex-end"},children:e.jsx(D,{disabled:!s.values.startDate||!s.values.endDate,name:"search",title:"검색",onClick:s.handleSubmit})})]})]})}const $=[{field:"id",headerName:"ID",flex:.8,renderCell:t=>e.jsx(a,{children:t.row.id})},{field:"statDate",headerName:"통계일",flex:1.2,renderCell:t=>e.jsx(a,{color:"primary",children:t.row.statDate})},{field:"service",headerName:"서비스 코드",flex:1,renderCell:t=>e.jsx(a,{children:t.row.service})},{field:"appId",headerName:"APP ID",flex:1,renderCell:t=>e.jsx(a,{children:t.row.appId})},{field:"model",headerName:"단말 모델",flex:1,renderCell:t=>e.jsx(a,{children:t.row.model})},{field:"opType",headerName:"OP Type",flex:1,renderCell:t=>e.jsx(a,{children:t.row.opType})},{field:"respCode",headerName:"응답코드",flex:1,renderCell:t=>e.jsx(a,{children:t.row.respCode})},{field:"count",headerName:"전체",flex:1,renderCell:t=>e.jsx(a,{children:t.row.count.toLocaleString()})},{field:"successCnt",headerName:"성공",flex:1,renderCell:t=>e.jsx(a,{children:t.row.successCnt.toLocaleString()})},{field:"successRate",headerName:"성공률(%)",flex:1,renderCell:t=>e.jsx(a,{children:t.row.successRate})},{field:"elapsedTime",headerName:"평균응답(초)",flex:1,renderCell:t=>e.jsx(a,{children:t.row.elapsedTime})}],A=t=>{console.log("params : ",t);const s=[{field:"id",flex:.8,headerName:"ID",view:!0},{field:"statDate",flex:1.2,headerName:"통계일",view:!0},{field:"service",flex:1,headerName:"서비스 코드",view:t.serviceCheck},{field:"appId",flex:1,headerName:"APP ID",view:t.appIdCheck},{field:"model",flex:1,headerName:"단말 모델",view:t.modelCheck},{field:"opType",flex:1,headerName:"OP Type",view:t.opTypeCheck},{field:"respCode",flex:1,headerName:"응답코드",view:t.respCodeCheck},{field:"count",flex:1,headerName:"전체",view:!0},{field:"successCnt",flex:1,headerName:"성공",view:!0},{field:"successRate",flex:1,headerName:"성공률(%)",view:!0},{field:"elapsedTime",flex:1,headerName:"평균응답(초)",view:!0}];return s.filter(d=>d.view!==!1).length>6?s.filter(d=>d.view):s.map(d=>({...d,view:!0}))},G=()=>{N();const[t,s]=p.useState(!1),[l,d]=p.useState({count:0,lists:[]}),[n,h]=p.useState({page:1,limit:parseInt("50")}),{data:c}=R(n,{enabled:t}),v=o=>{d({count:0,lists:[]}),h({...n,...o,page:1}),s(!0)},T=({row:o})=>{},S=o=>{const u=parseInt("10"),j=(o+1)*u;o>0&&j>=l.lists.length&&(h({...n,page:n.page+1}),s(!0))};return p.useEffect(()=>{if(t&&c&&c.code==="0000"&&c.data){const{totalCount:o,lists:u}=c.data;s(!1),d(j=>({count:o,lists:[...j.lists,...u]}))}},[t,c]),console.log("fetchData : ",l),e.jsxs(r,{children:[e.jsx(P,{title:"서비스 통계"}),e.jsx(V,{onSearch:v}),e.jsxs(r,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(r,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(a,{sx:{fontSize:"14px"},children:`Total Count: ${l.count}`})}),e.jsx(B,{rows:l==null?void 0:l.lists,rowCount:l==null?void 0:l.count,columns:l!=null&&l.count?A(n):$,sort:{field:"id",orderby:"desc"},onPageChange:S,onRowClick:T,activeTools:["export"],pageInit:n.page===1})]})]})},re=G;export{re as ServiceStatPage};
