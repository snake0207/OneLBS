import{j as e,B as s,T as l,S as d,O as i,r}from"./index-CtGT7pB0.js";import{b as a,c as t,d as o,e as n,M as h,a as c}from"./index-CkwR4aEQ.js";import{C as x}from"./index-VIunMvyj.js";import{a as p}from"./service-zn3oAYvt.js";import{u as m}from"./formik.esm-DAidWDL1.js";import{S as f}from"./index-BN4gr2T-.js";import{D as j}from"./index--uCOVDIp.js";import{T as C}from"./index-DlwK5QFR.js";import{C as u}from"./index-BFtMdZUY.js";import{T as k}from"./index-Ddq0Ofe6.js";import{a as w,u as v,b as y,c as g,d as b}from"./service-Dw05zt6F.js";import"./index.esm-CfFDv5dH.js";import"./index-C6TEBvmk.js";import"./index-DE0F4aPm.js";import"./TextField-D-bOuL6E.js";import"./MenuItem-BYlXn1lz.js";import"./Close-CTx8nZBT.js";import"./FormControlLabel-CIx-0vjk.js";import"./InputAdornment-CN7O440v.js";const N={searchBox:{display:"flex",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"6px 10px 6px 0"},input:{height:"40px",pt:0,pb:0}}};function T({onSearch:i}){const r=m({initialValues:{dateType:"D",startDate:"",endDate:"",start_time:"00",end_time:String((new Date).getHours()),serviceCheck:!1,appIdCheck:!1,modelCheck:!1,opTypeCheck:!1,planeCheck:!1,posMethodCheck:!1,respCodeCheck:!1,service:"",appId:"",model:"",opType:"N",plane:"N",posMethod:"N",respCode:"N"},onSubmit:e=>{const s=`${e.startDate.split("-").join("")}${e.start_time}`,l=`${e.endDate.split("-").join("")}${e.end_time}`,d="N"===e.opType?"":e.opType,r="N"===e.plane?"":e.plane,a="N"===e.posMethod?"":e.posMethod,t="N"===e.respCode?"":e.respCode;i&&(delete e.start_time,delete e.end_time,i({...e,startDate:s,endDate:l,opType:d,plane:r,posMethod:a,respCode:t}))}});return e.jsxs(s,{sx:N.searchBox,flexDirection:"column",children:[e.jsxs(s,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(s,{sx:{flex:1},children:e.jsx(l,{children:"시간 구분"})}),e.jsx(s,{sx:{flex:7},children:e.jsx(a,{sx:N.tableBox,children:e.jsx(t,{children:e.jsxs(o,{children:[e.jsx(n,{style:{width:"15%"},children:e.jsx(f,{name:"dateType",formik:r,items:w(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(n,{style:{width:"4%"}}),e.jsx(n,{style:{width:"8%"},children:"조회기간"}),e.jsx(n,{style:{width:"60%"},children:e.jsxs(d,{direction:"row",spacing:.1,alignItems:"center",width:"100%",children:[e.jsx(j,{name:"startDate",formik:r}),e.jsx(C,{name:"start_time",formik:r}),e.jsx(l,{children:"~"}),e.jsx(j,{name:"endDate",formik:r}),e.jsx(C,{name:"end_time",formik:r})]})})]})})})}),e.jsx(s,{sx:{flex:1}})]}),e.jsxs(s,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(s,{sx:{flex:1},children:e.jsx(l,{children:"Group By"})}),e.jsx(s,{sx:{flex:7},children:e.jsx(a,{sx:N.tableBox,children:e.jsx(t,{children:e.jsx(o,{children:e.jsx(n,{colSpan:8,children:e.jsxs(s,{display:"flex",justifyContent:"space-between",children:[e.jsx(u,{checked:r.values.serviceCheck,onChange:e=>r.setFieldValue("serviceCheck",e.target.checked),value:r.values.serviceCheck,label:"서비스코드"}),e.jsx(u,{checked:r.values.appIdCheck,onChange:e=>r.setFieldValue("appIdCheck",e.target.checked),value:r.values.appIdCheck,label:"AppID"}),e.jsx(u,{checked:r.values.modelCheck,onChange:e=>r.setFieldValue("modelCheck",e.target.checked),value:r.values.modelCheck,label:"모델"}),e.jsx(u,{checked:r.values.opTypeCheck,onChange:e=>r.setFieldValue("opTypeCheck",e.target.checked),value:r.values.opTypeCheck,label:"OP Type"}),e.jsx(u,{checked:r.values.planeCheck,onChange:e=>r.setFieldValue("planeCheck",e.target.checked),value:r.values.planeCheck,label:"Plane"}),e.jsx(u,{checked:r.values.posMethodCheck,onChange:e=>r.setFieldValue("posMethodCheck",e.target.checked),value:r.values.posMethodCheck,label:"측위방식"}),e.jsx(u,{checked:r.values.respCodeCheck,onChange:e=>r.setFieldValue("respCodeCheck",e.target.checked),value:r.values.respCodeCheck,label:"응답코드"})]})})})})})}),e.jsx(s,{sx:{flex:1}})]}),e.jsxs(s,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[e.jsx(s,{sx:{flex:1},children:e.jsx(l,{children:"검색 조건"})}),e.jsx(s,{sx:{flex:7},children:e.jsx(a,{sx:N.tableBox,children:e.jsxs(t,{children:[e.jsxs(o,{children:[e.jsx(n,{style:{width:"10%"},children:"서비스 코드"}),e.jsx(n,{style:{width:"15%"},children:e.jsx(k,{name:"service",formik:r})}),e.jsx(n,{style:{width:"10%"},children:"App ID"}),e.jsx(n,{style:{width:"15%"},children:e.jsx(k,{name:"appId",formik:r})}),e.jsx(n,{style:{width:"10%"},children:"단말 모델"}),e.jsx(n,{style:{width:"15%"},children:e.jsx(k,{name:"model",formik:r})}),e.jsx(n,{style:{width:"10%"},children:"OP Type"}),e.jsx(n,{style:{width:"15%"},children:e.jsx(f,{name:"opType",items:v(),formik:r,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})})]}),e.jsxs(o,{children:[e.jsx(n,{style:{width:"10%"},children:"Plane"}),e.jsx(n,{style:{width:"15%"},children:e.jsx(f,{name:"plane",items:y(),formik:r,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(n,{style:{width:"10%"},children:"측위 방식"}),e.jsx(n,{style:{width:"15%"},children:e.jsx(f,{name:"posMethod",items:g(),formik:r,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(n,{style:{width:"10%"},children:"응답 코드"}),e.jsx(n,{style:{width:"15%"},children:e.jsx(f,{name:"respCode",items:b(),formik:r,style:{height:"40px",width:"100%",fontSize:14,backgroundColor:"form.main",borderRadius:"4px"}})})]})]})})}),e.jsx(s,{sx:{flex:1,height:"100px",display:"flex",alignItems:"flex-end",pb:.5},children:e.jsx(h,{disabled:!r.values.startDate||!r.values.endDate,name:"search",title:"검색",onClick:r.handleSubmit})})]})]})}const I=[{field:"id",headerName:"ID",flex:.8,renderCell:s=>e.jsx(l,{children:s.row.id})},{field:"statDate",headerName:"통계일",flex:1.2,renderCell:s=>e.jsx(l,{color:"primary",children:s.row.statDate})},{field:"service",headerName:"서비스 코드",flex:1,renderCell:s=>e.jsx(l,{children:s.row.service})},{field:"appId",headerName:"APP ID",flex:1,renderCell:s=>e.jsx(l,{children:s.row.appId})},{field:"model",headerName:"단말 모델",flex:1,renderCell:s=>e.jsx(l,{children:s.row.model})},{field:"opType",headerName:"OP Type",flex:1,renderCell:s=>e.jsx(l,{children:s.row.opType})},{field:"plane",headerName:"Plane",flex:1,renderCell:s=>e.jsx(l,{children:s.row.plane})},{field:"posMethod",headerName:"측위 방식",flex:1,renderCell:s=>e.jsx(l,{children:s.row.posMethod})},{field:"respCode",headerName:"응답코드",flex:1,renderCell:s=>e.jsx(l,{children:s.row.respCode})},{field:"count",headerName:"전체",flex:1,renderCell:s=>e.jsx(l,{children:s.row.count.toLocaleString()})},{field:"successCnt",headerName:"성공",flex:1,renderCell:s=>e.jsx(l,{children:s.row.successCnt.toLocaleString()})},{field:"successRate",headerName:"성공률(%)",flex:1,renderCell:s=>e.jsx(l,{children:s.row.successRate})},{field:"elapsedTime",headerName:"평균응답(초)",flex:1,renderCell:s=>e.jsx(l,{children:s.row.elapsedTime})}],D=e=>{const s=[{field:"id",flex:.8,headerName:"ID",view:!0},{field:"statDate",flex:1.2,headerName:"통계일",view:!0},{field:"service",flex:1,headerName:"서비스 코드",view:e.serviceCheck},{field:"appId",flex:1,headerName:"APP ID",view:e.appIdCheck},{field:"model",flex:1,headerName:"단말 모델",view:e.modelCheck},{field:"opType",flex:1,headerName:"OP Type",view:e.opTypeCheck},{field:"plane",flex:1,headerName:"Plane",view:e.planeCheck},{field:"posMethod",flex:1,headerName:"측위 방식",view:e.posMethodCheck},{field:"respCode",flex:1,headerName:"응답코드",view:e.respCodeCheck},{field:"count",flex:1,headerName:"전체",view:!0},{field:"successCnt",flex:1,headerName:"성공",view:!0},{field:"successRate",flex:1,headerName:"성공률(%)",view:!0},{field:"elapsedTime",flex:1,headerName:"평균응답(초)",view:!0}];return s.filter((e=>!1!==e.view)).length>6?s.filter((e=>e.view)):s.map((e=>({...e,view:!0})))},S=()=>{i();const[d,a]=r.useState(!1),[t,o]=r.useState({count:0,lists:[]}),[n,h]=r.useState({page:1,limit:parseInt("50")}),{data:m}=p(n,{enabled:d});return r.useEffect((()=>{if(d&&m&&"0000"===m.code&&m.data){const{totalCount:e,lists:s}=m.data;a(!1),o((l=>({count:e,lists:[...l.lists,...s]})))}}),[d,m]),e.jsxs(s,{children:[e.jsx(c,{title:"서비스 세부 통계"}),e.jsx(T,{onSearch:e=>{o({count:0,lists:[]}),h({...n,...e,page:1}),a(!0)}}),e.jsxs(s,{sx:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},children:[e.jsx(s,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:e.jsx(l,{sx:{fontSize:"14px"},children:`Total Count: ${t.count}`})}),e.jsx(x,{rows:null==t?void 0:t.lists,rowCount:null==t?void 0:t.count,columns:(null==t?void 0:t.count)?D(n):I,sort:{field:"id",orderby:"desc"},onPageChange:e=>{const s=parseInt("10");e>0&&(e+1)*s>=t.lists.length&&(h({...n,page:n.page+1}),a(!0))},onRowClick:({row:e})=>{},activeTools:["export"],pageInit:1===n.page})]})]})};export{S as ServiceSubStatPage};
