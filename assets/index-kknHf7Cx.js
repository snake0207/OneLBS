function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/OllehMap-6XbzOhon.js","assets/index-CMVj578i.js","assets/olleh_map-cJNfxRyM.js","assets/index-B7o4kVWo.js","assets/cjs-CC7bO--q.js","assets/index-RSFPSF8C.js","assets/index-D7cOxX97.js","assets/index-BG4KGtcg.js","assets/useSlot-DDTYWnPv.js","assets/Close-DL26paGk.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{o as xe,p as ge,j as e,B as c,r as o,N as I,T as J,k as K,S as he}from"./index-CMVj578i.js";import{d as me}from"./PlaylistAddCheckOutlined-CWCyOEhM.js";import{b as Z,c as pe,d as S,e as s,M as je,a as fe,f as y}from"./index-Ccs25vvN.js";import{u as R}from"./formik.esm-Bxiyl05w.js";import{w as be,c as ye,d as Se,e as Ce,f as ve,h as ke}from"./facility-D0rd0ENb.js";import{S as Te}from"./index-C4QpMhE_.js";import{T as r}from"./index-t3WTL6mH.js";import{T as Ie}from"./TableBody-Ch-SdFnm.js";import"./TextField-DlvKLlcX.js";import"./MenuItem-Cq3gzPAw.js";import"./InputAdornment-QnwYxBBF.js";var w={},we=ge;Object.defineProperty(w,"__esModule",{value:!0});var T=w.default=void 0,De=we(xe()),_e=e;T=w.default=(0,De.default)((0,_e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.17-5.24-1.1-1.1c.71-1.33.53-3.01-.59-4.13C13.79 8.84 12.9 8.5 12 8.5c-.03 0-.06.01-.09.01L13 9.6l-1.06 1.06-2.83-2.83L11.94 5 13 6.06l-.96.96c1.27.01 2.53.48 3.5 1.44 1.7 1.71 1.91 4.36.63 6.3m-1.28 1.41L12.06 19 11 17.94l.95-.95c-1.26-.01-2.52-.5-3.48-1.46-1.71-1.71-1.92-4.35-.64-6.29l1.1 1.1c-.71 1.33-.53 3.01.59 4.13.7.7 1.63 1.04 2.56 1.01L11 14.4l1.06-1.06z"}),"ChangeCircleOutlined");const n={contentBox:{width:"100%",borderRadius:"8px",p:"18px 20px",backgroundColor:"background.contents",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},table_base:{mb:3,th:{pt:1,pb:1,textAlign:"center",border:"1px solid",borderColor:"table.viewTopBorder"},td:{pt:.5,pb:.5,border:"1px solid",borderColor:"table.viewTopBorder"},"& tr:first-of-type":{"& th":{fontSize:"15px",color:"white",textAlign:"center"}}},cellTitle:{width:"8%",color:"white",backgroundColor:"#009ACC"},cellInput:{width:"14%"},cellInputWide:{width:"18%"}},m={searchBox:{display:"flex",justifyContent:"space-between",width:"100%",borderRadius:"8px",mb:"10px",p:"16px 20px",backgroundColor:"grey.search",boxShadow:"0 3px 14px rgb(0 0 0 / 24%)"},tableBox:{width:"100%",th:{border:0,color:"text.darkgray",p:"3px 10px 3px 0"},input:{height:"40px",pt:0,pb:0}},searchButton:{fontSize:15,fontWeight:400,width:"69px",height:"40px",minWidth:"auto",backgroundColor:"button.main",padding:"6px"},inputDash:{fontSize:15,display:"flex",alignItems:"center"},cellTitle:{width:"10%"},cellInput:{width:"15%"}};function Pe({onSearch:x}){const d=R({initialValues:{source:"W",mac:""},onSubmit:u=>{x&&x({...u})}});return e.jsx(c,{sx:m.searchBox,children:e.jsx(Z,{sx:m.tableBox,children:e.jsx(pe,{children:e.jsxs(S,{children:[e.jsx(s,{style:m.cellTitle,children:"시설구분"}),e.jsx(s,{style:m.cellInput,children:e.jsx(Te,{name:"source",formik:d,items:be(),sx:{width:"100%",height:40,backgroundColor:"form.main",borderRadius:"4px"}})}),e.jsx(s,{}),e.jsx(s,{style:m.cellTitle,children:"MAC 주소"}),e.jsx(s,{style:{width:"20%"},children:e.jsx(r,{name:"mac",formik:d})}),e.jsx(s,{align:"right",children:e.jsx(je,{disabled:!d.values.mac,name:"search",title:"검색",onClick:d.handleSubmit})})]})})})})}const Fe=o.lazy(()=>I(()=>import("./OllehMap-6XbzOhon.js"),__vite__mapDeps([0,1,2]))),Me=o.lazy(()=>I(()=>import("./index-B7o4kVWo.js"),__vite__mapDeps([3,1,4,5]))),Ee=o.lazy(()=>I(()=>import("./index-D7cOxX97.js"),__vite__mapDeps([6,1,7,8,9]))),k={mac:"",ssid:"",grade:0,building:"",floor:"",vap:{utmk:{latitude:"",longitude:""},wgs84:{latitude:"",longitude:""}},regDate:"",updDate:"",gridX:[],gridY:[],rssi:[],dataCount:[]},We=()=>{var B,L;const[x,d]=o.useState(!1),[u,C]=o.useState(!0),[D,p]=o.useState(""),[g,j]=o.useState({edit:!1,delete:!1,save:!1,msg:"",openDialog:!1}),[h,ee]=o.useState({}),{mutate:le,isPending:_}=ye(),{mutate:te,isPending:P}=Se(),{mutate:se,isPending:F}=Ce(),M={longitude:127.1279874,latitude:37.3998912,title:"KT 분당"},[E,v]=o.useState([M]),{data:l}=ve(h,{enabled:x}),t=R({initialValues:k,onSubmit:i=>{const a={mac:i.mac,ssid:i.ssid,grade:i.grade||0,building:i.building||"",floor:i.floor||"",latitude:i.vap.wgs84.latitude,longitude:i.vap.wgs84.longitude,source:h.source||"C"};console.log("onSubmit >> ",JSON.stringify(a,null,2)),le({...a},{onSuccess:({data:b})=>{console.log("response : ",b)}})}}),ie=i=>{C(!1),ee({...h,...i}),d(!0)},ne=()=>{console.log("handleUpdateSubmit...");const i={mac:t.values.mac,ssid:t.values.ssid,grade:t.values.grade||0,building:t.values.building||"",floor:t.values.floor||"",latitude:t.values.vap.wgs84.latitude,longitude:t.values.vap.wgs84.longitude,source:h.source};se({...i},{onSuccess:({data:a})=>{console.log("update-response : ",a),p(`UPDATE API RESULT ${a==null?void 0:a.data}`),(a==null?void 0:a.code)==="0000"&&d(!0)}}),f()},ae=()=>{var i;console.log("handleDeleteSubmit..."),te({mac:(i=l==null?void 0:l.data)==null?void 0:i.mac,source:h.source},{onSuccess:({data:a})=>{console.log("delete-response : ",a),p(`DELETE API RESULT ${a==null?void 0:a.data}`),(a==null?void 0:a.code)==="0000"&&d(!0)}}),f()},oe=()=>{g.save&&t.handleSubmit(),g.edit&&ne(),g.delete&&ae(),f()},f=()=>{j({edit:!1,delete:!1,save:!1,msg:"",openDialog:!1})},W=o.useCallback(()=>{console.log("handleInputAllClear()..."),t.setValues({...k})},[]),re=o.useCallback(()=>{j(i=>({...i,save:!0,msg:"입력한 정보로 저장 하시겠습니까?",openDialog:!0}))},[]),de=o.useCallback(()=>{j(i=>({...i,edit:!0,msg:"수정한 정보로 저장 하시겠습니까?",openDialog:!0}))},[]),ce=o.useCallback(()=>{j(i=>({...i,delete:!0,msg:"삭제하면 복구가 불가능합니다. 삭제 하시겠습니까?",openDialog:!0}))},[]),ue=i=>{t.setFieldValue("vap.wgs84",i),v([i])},A=()=>{var a,b,V,O,U,z,$,q,Q,Y,X,G,H,N;t.setValues({...l==null?void 0:l.data}),t.setFieldValue("grade",((a=l==null?void 0:l.data)==null?void 0:a.grade)||0),t.setFieldValue("building",((b=l==null?void 0:l.data)==null?void 0:b.building)||""),t.setFieldValue("floor",((V=l==null?void 0:l.data)==null?void 0:V.floor)||""),t.setFieldValue("updDate",((O=l==null?void 0:l.data)==null?void 0:O.updDate)||"");const i={utmk:{longitude:(z=(U=l==null?void 0:l.data)==null?void 0:U.vap)==null?void 0:z.utmk[0],latitude:(q=($=l==null?void 0:l.data)==null?void 0:$.vap)==null?void 0:q.utmk[1]},wgs84:{longitude:(Y=(Q=l==null?void 0:l.data)==null?void 0:Q.vap)==null?void 0:Y.wgs84[0],latitude:(G=(X=l==null?void 0:l.data)==null?void 0:X.vap)==null?void 0:G.wgs84[1]}};t.setFieldValue("vap",i),v([{...i.wgs84,title:((H=l==null?void 0:l.data)==null?void 0:H.building)||((N=l==null?void 0:l.data)==null?void 0:N.ssid)||""}])};return o.useEffect(()=>{x&&l&&(console.log("apiResult : ",l),d(!1),p(`QUERY API RESULT ${l==null?void 0:l.message}`),(l==null?void 0:l.code)==="0000"?A():(t.setValues({...k}),v([M])))},[l,h]),e.jsxs(c,{children:[e.jsx(fe,{title:"WiFi 시설정보"}),e.jsx(Pe,{onSearch:ie}),e.jsxs(c,{sx:n.contentBox,children:[e.jsxs(c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(c,{display:"flex",alignItems:"center",children:[e.jsx(me,{}),e.jsx(J,{sx:{ml:1,fontSize:"16px",fontWeight:500,color:"text.darkgray"},children:"검색 결과"})]}),e.jsx(c,{children:u?e.jsx(K,{onClick:()=>{C(!1),(l==null?void 0:l.code)==="0000"&&A()},startIcon:e.jsx(T,{}),children:"편집 화면으로 전환"}):e.jsx(K,{onClick:()=>{W(),C(!0)},startIcon:e.jsx(T,{}),children:"등록 화면으로 전환"})})]}),e.jsx(c,{children:e.jsx("form",{children:e.jsx(Z,{sx:n.table_base,children:e.jsxs(Ie,{children:[e.jsxs(S,{children:[e.jsx(s,{style:n.cellTitle,children:"MAC"}),e.jsx(s,{style:n.cellInput,children:e.jsx(r,{name:"mac",formik:t})}),e.jsx(s,{style:n.cellTitle,children:"SSID"}),e.jsx(s,{style:n.cellInput,children:e.jsx(r,{name:"ssid",formik:t})}),e.jsx(s,{style:n.cellTitle,children:"Grade"}),e.jsx(s,{style:n.cellInputWide,children:e.jsx(r,{name:"grade",formik:t})}),e.jsx(s,{style:n.cellTitle,children:"신뢰도"}),e.jsx(s,{style:n.cellInputWide,children:e.jsx(J,{children:(B=l==null?void 0:l.data)!=null&&B.hasOwnProperty("grade")&&((L=l==null?void 0:l.data)==null?void 0:L.grade)!==null?ke[t.values.grade].label:""})})]}),e.jsxs(S,{children:[e.jsx(s,{style:n.cellTitle,children:"Building"}),e.jsx(s,{style:n.cellInput,children:e.jsx(r,{name:"building",formik:t})}),e.jsx(s,{style:n.cellTitle,children:"Floor"}),e.jsx(s,{style:n.cellInput,children:e.jsx(r,{name:"floor",formik:t})}),e.jsx(s,{style:n.cellTitle,children:""}),e.jsx(s,{style:n.cellInputWide,children:""}),e.jsx(s,{style:n.cellTitle,children:""}),e.jsx(s,{style:n.cellInputWide,children:""})]}),e.jsxs(S,{children:[e.jsx(s,{style:n.cellTitle,children:"위도"}),e.jsx(s,{style:n.cellInput,children:e.jsx(r,{name:"vap.wgs84.latitude",formik:t})}),e.jsx(s,{style:n.cellTitle,children:"경도"}),e.jsx(s,{style:n.cellInput,children:e.jsx(r,{name:"vap.wgs84.longitude",formik:t})}),e.jsx(s,{style:n.cellTitle,children:"생성일시"}),e.jsx(s,{style:n.cellInputWide,children:e.jsx(r,{name:"regDate",formik:t})}),e.jsx(s,{style:n.cellTitle,children:"갱신일시"}),e.jsx(s,{style:n.cellInputWide,children:e.jsx(r,{name:"updDate",formik:t})})]})]})})})}),e.jsx(c,{sx:{width:"100%",height:"400px",mb:4},children:!x&&E.length>0&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Map Loading..."}),children:e.jsx(Fe,{locations:[...E],gridX:u?[]:(l==null?void 0:l.code)==="0000"?t.values.gridX:null,gridY:u?[]:(l==null?void 0:l.code)==="0000"?t.values.gridY:null,rssi:u?[]:(l==null?void 0:l.code)==="0000"?t.values.rssi:null,modeCreate:u,onMapClick:i=>ue(i)})})}),e.jsx(c,{align:"right",children:e.jsx(he,{spacing:2,direction:"row",sx:{justifyContent:"flex-end"},children:u?e.jsxs(e.Fragment,{children:[e.jsx(y,{disabled:_,name:"cancel",title:"초기화",onClick:W}),e.jsx(y,{disabled:_,name:"create",title:"저장",onClick:re})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{disabled:P||F,name:"edit",title:"수정",onClick:de}),e.jsx(y,{disabled:P||F,name:"delete",title:"삭제",onClick:ce})]})})})]}),g.openDialog&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Map Loading..."}),children:e.jsx(Me,{isOpen:g.openDialog,content:g.msg,onCancel:f,onConfirm:oe})}),D&&e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Map Loading..."}),children:e.jsx(Ee,{msg:D,autoHideDuration:3e3,callback:()=>p("")})})]})},Ae=()=>e.jsx(e.Fragment,{children:e.jsx(We,{})}),Ge=Ae;export{Ge as WifiInfoMapPage};
